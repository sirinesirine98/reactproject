{"ast":null,"code":"import { systemToComponent as e } from \"@virtuoso.dev/react-urx\";\nimport { system as t, stream as n, statefulStream as o, connect as r, pipe as i, map as l, getValue as a, streamFromEmitter as u, filter as s, distinctUntilChanged as c, subscribe as d, tup as f, merge as m, duc as h, skip as p, mapTo as g, debounceTime as v, statefulStreamFromEmitter as I, combineLatest as C, scan as S, publish as T, throttleTime as x, withLatestFrom as w, handleNext as y, noop as b, prop as H, tap as R, compose as z } from \"@virtuoso.dev/urx\";\nimport { useRef as k, useCallback as B, useEffect as E, useLayoutEffect as L, memo as P, createElement as O } from \"react\";\n\nfunction M() {\n  return (M = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var n = arguments[t];\n\n      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction A(e, t) {\n  if (null == e) return {};\n  var n,\n      o,\n      r = {},\n      i = Object.keys(e);\n\n  for (o = 0; o < i.length; o++) t.indexOf(n = i[o]) >= 0 || (r[n] = e[n]);\n\n  return r;\n}\n\nfunction V(e, t) {\n  (null == t || t > e.length) && (t = e.length);\n\n  for (var n = 0, o = new Array(t); n < t; n++) o[n] = e[n];\n\n  return o;\n}\n\nfunction W(e, t) {\n  var n;\n\n  if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n    if (Array.isArray(e) || (n = function (e, t) {\n      if (e) {\n        if (\"string\" == typeof e) return V(e, t);\n        var n = Object.prototype.toString.call(e).slice(8, -1);\n        return \"Object\" === n && e.constructor && (n = e.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(e) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? V(e, t) : void 0;\n      }\n    }(e)) || t && e && \"number\" == typeof e.length) {\n      n && (e = n);\n      var o = 0;\n      return function () {\n        return o >= e.length ? {\n          done: !0\n        } : {\n          done: !1,\n          value: e[o++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  return (n = e[Symbol.iterator]()).next.bind(n);\n}\n\nfunction D(e, t) {\n  return !(!e || e[0] !== t[0] || e[1] !== t[1]);\n}\n\nfunction F(e, t) {\n  return !(!e || e.startIndex !== t.startIndex || e.endIndex !== t.endIndex);\n}\n\nvar G,\n    N,\n    U = t(function () {\n  var e = n(),\n      t = n(),\n      a = o(0),\n      u = n(),\n      s = o(0),\n      c = n(),\n      d = n(),\n      f = o(0),\n      m = o(0),\n      h = n(),\n      p = n(),\n      g = o(!1);\n  return r(i(e, l(function (e) {\n    return e[0];\n  })), t), r(i(e, l(function (e) {\n    return e[1];\n  })), d), r(t, s), {\n    scrollContainerState: e,\n    scrollTop: t,\n    viewportHeight: c,\n    headerHeight: f,\n    footerHeight: m,\n    scrollHeight: d,\n    smoothScrollTargetReached: u,\n    scrollTo: h,\n    scrollBy: p,\n    statefulScrollTop: s,\n    deviation: a,\n    scrollingInProgress: g\n  };\n}, [], {\n  singleton: !0\n});\n!function (e) {\n  e[e.DEBUG = 0] = \"DEBUG\", e[e.INFO = 1] = \"INFO\", e[e.WARN = 2] = \"WARN\", e[e.ERROR = 3] = \"ERROR\";\n}(N || (N = {}));\n\nvar _ = ((G = {})[N.DEBUG] = \"debug\", G[N.INFO] = \"log\", G[N.WARN] = \"warn\", G[N.ERROR] = \"error\", G),\n    j = t(function () {\n  var e = o(N.ERROR);\n  return {\n    log: o(function (t, n, o) {\n      var r;\n      void 0 === o && (o = N.INFO), o >= (null != (r = (\"undefined\" == typeof globalThis ? window : globalThis).VIRTUOSO_LOG_LEVEL) ? r : a(e)) && console[_[o]](\"%creact-virtuoso: %c%s %o\", \"color: #0253b3; font-weight: bold\", \"color: initial\", t, n);\n    }),\n    logLevel: e\n  };\n}, [], {\n  singleton: !0\n}),\n    K = t(function (e) {\n  var t = e[0].log,\n      n = o(!1),\n      r = u(i(n, s(function (e) {\n    return e;\n  }), c()));\n  return d(n, function (e) {\n    e && a(t)(\"props updated\", {}, N.DEBUG);\n  }), {\n    propsReady: n,\n    didMount: r\n  };\n}, f(j), {\n  singleton: !0\n}),\n    Y = \"up\",\n    Z = {\n  atBottom: !1,\n  notAtBottomBecause: \"NOT_SHOWING_LAST_ITEM\",\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0\n  }\n},\n    q = t(function (e) {\n  var t = e[0],\n      f = t.scrollContainerState,\n      y = t.scrollTop,\n      b = t.viewportHeight,\n      H = t.headerHeight,\n      R = t.footerHeight,\n      z = t.scrollBy,\n      k = o(!1),\n      B = o(!0),\n      E = n(),\n      L = n(),\n      P = o(4),\n      O = u(i(m(i(h(y), p(1), g(!0)), i(h(y), p(1), g(!1), v(100))), c())),\n      M = I(i(m(i(z, g(!0)), i(z, g(!1), v(200))), c()), !1);\n  r(i(h(y), l(function (e) {\n    return 0 === e;\n  }), c()), B), r(B, L);\n  var A = u(i(C(f, h(b), h(H), h(R), h(P)), S(function (e, t) {\n    var n,\n        o,\n        r = t[0],\n        i = r[0],\n        l = r[1],\n        a = t[1],\n        u = {\n      viewportHeight: a,\n      scrollTop: i,\n      scrollHeight: l\n    };\n    return i + a - l > -t[4] ? (i > e.state.scrollTop ? (n = \"SCROLLED_DOWN\", o = e.state.scrollTop - i) : (n = \"SIZE_DECREASED\", o = e.state.scrollTop - i || e.scrollTopDelta), {\n      atBottom: !0,\n      state: u,\n      atBottomBecause: n,\n      scrollTopDelta: o\n    }) : {\n      atBottom: !1,\n      notAtBottomBecause: u.scrollHeight > e.state.scrollHeight ? \"SIZE_INCREASED\" : a < e.state.viewportHeight ? \"VIEWPORT_HEIGHT_DECREASING\" : i < e.state.scrollTop ? \"SCROLLING_UPWARDS\" : \"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM\",\n      state: u\n    };\n  }, Z), c(function (e, t) {\n    return e && e.atBottom === t.atBottom;\n  }))),\n      V = I(i(f, S(function (e, t) {\n    var n = t[0],\n        o = t[1];\n    return e.scrollHeight !== o ? e.scrollTop !== n ? {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: e.scrollTop - n,\n      changed: !0\n    } : {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: 0,\n      changed: !0\n    } : {\n      scrollTop: n,\n      scrollHeight: o,\n      jump: 0,\n      changed: !1\n    };\n  }, {\n    scrollHeight: 0,\n    jump: 0,\n    scrollTop: 0,\n    changed: !1\n  }), s(function (e) {\n    return e.changed;\n  }), l(function (e) {\n    return e.jump;\n  })), 0);\n  r(i(A, l(function (e) {\n    return e.atBottom;\n  })), k), d(k, function (e) {\n    setTimeout(function () {\n      return T(E, e);\n    });\n  });\n  var W = o(\"down\");\n  d(k, function (e) {\n    setTimeout(function () {\n      T(E, e);\n    });\n  }), r(i(f, l(function (e) {\n    return e[0];\n  }), c(), S(function (e, t) {\n    return a(M) ? {\n      direction: e.direction,\n      prevScrollTop: t\n    } : {\n      direction: t < e.prevScrollTop ? Y : \"down\",\n      prevScrollTop: t\n    };\n  }, {\n    direction: \"down\",\n    prevScrollTop: 0\n  }), l(function (e) {\n    return e.direction;\n  })), W), r(i(f, x(50), g(\"none\")), W), r(k, E);\n  var D = o(0);\n  return r(i(O, s(function (e) {\n    return !e;\n  }), g(0)), D), r(i(y, x(100), w(O), s(function (e) {\n    return !!e[1];\n  }), S(function (e, t) {\n    return [e[1], t[0]];\n  }, [0, 0]), l(function (e) {\n    return e[1] - e[0];\n  })), D), {\n    isScrolling: O,\n    isAtTop: B,\n    isAtBottom: k,\n    atBottomState: A,\n    atTopStateChange: L,\n    atBottomStateChange: E,\n    scrollDirection: W,\n    atBottomThreshold: P,\n    scrollVelocity: D,\n    lastJumpDueToItemResize: V\n  };\n}, f(U)),\n    J = t(function (e) {\n  var t = e[0].scrollVelocity,\n      a = o(!1),\n      u = n(),\n      f = o(!1);\n  return r(i(t, w(f, a, u), s(function (e) {\n    return !!e[1];\n  }), l(function (e) {\n    var t = e[0],\n        n = e[1],\n        o = e[2],\n        r = e[3],\n        i = n.enter;\n\n    if (o) {\n      if ((0, n.exit)(t, r)) return !1;\n    } else if (i(t, r)) return !0;\n\n    return o;\n  }), c()), a), d(i(C(a, t, u), w(f)), function (e) {\n    var t = e[0],\n        n = e[1];\n    return t[0] && n && n.change && n.change(t[1], t[2]);\n  }), {\n    isSeeking: a,\n    scrollSeekConfiguration: f,\n    scrollVelocity: t,\n    scrollSeekRangeChanged: u\n  };\n}, f(q), {\n  singleton: !0\n}),\n    $ = {\n  lvl: 0\n};\n\nfunction Q(e, t, n, o, r) {\n  return void 0 === o && (o = $), void 0 === r && (r = $), {\n    k: e,\n    v: t,\n    lvl: n,\n    l: o,\n    r: r\n  };\n}\n\nfunction X(e) {\n  return e === $;\n}\n\nfunction ee() {\n  return $;\n}\n\nfunction te(e, t) {\n  if (X(e)) return $;\n  var n = e.k,\n      o = e.l,\n      r = e.r;\n\n  if (t === n) {\n    if (X(o)) return r;\n    if (X(r)) return o;\n    var i = le(o);\n    return ce(ue(e, {\n      k: i[0],\n      v: i[1],\n      l: ae(o)\n    }));\n  }\n\n  return ce(ue(e, t < n ? {\n    l: te(o, t)\n  } : {\n    r: te(r, t)\n  }));\n}\n\nfunction ne(e, t, n) {\n  if (void 0 === n && (n = \"k\"), X(e)) return [-Infinity, void 0];\n  if (e[n] === t) return [e.k, e.v];\n\n  if (e[n] < t) {\n    var o = ne(e.r, t, n);\n    return -Infinity === o[0] ? [e.k, e.v] : o;\n  }\n\n  return ne(e.l, t, n);\n}\n\nfunction oe(e, t, n) {\n  return X(e) ? Q(t, n, 1) : t === e.k ? ue(e, {\n    k: t,\n    v: n\n  }) : function (e) {\n    return me(he(e));\n  }(ue(e, t < e.k ? {\n    l: oe(e.l, t, n)\n  } : {\n    r: oe(e.r, t, n)\n  }));\n}\n\nfunction re(e, t, n) {\n  if (X(e)) return [];\n  var o = e.k,\n      r = e.v,\n      i = e.r,\n      l = [];\n  return o > t && (l = l.concat(re(e.l, t, n))), o >= t && o <= n && l.push({\n    k: o,\n    v: r\n  }), o <= n && (l = l.concat(re(i, t, n))), l;\n}\n\nfunction ie(e) {\n  return X(e) ? [] : [].concat(ie(e.l), [{\n    k: e.k,\n    v: e.v\n  }], ie(e.r));\n}\n\nfunction le(e) {\n  return X(e.r) ? [e.k, e.v] : le(e.r);\n}\n\nfunction ae(e) {\n  return X(e.r) ? e.l : ce(ue(e, {\n    r: ae(e.r)\n  }));\n}\n\nfunction ue(e, t) {\n  return Q(void 0 !== t.k ? t.k : e.k, void 0 !== t.v ? t.v : e.v, void 0 !== t.lvl ? t.lvl : e.lvl, void 0 !== t.l ? t.l : e.l, void 0 !== t.r ? t.r : e.r);\n}\n\nfunction se(e) {\n  return X(e) || e.lvl > e.r.lvl;\n}\n\nfunction ce(e) {\n  var t = e.l,\n      n = e.r,\n      o = e.lvl;\n  if (n.lvl >= o - 1 && t.lvl >= o - 1) return e;\n\n  if (o > n.lvl + 1) {\n    if (se(t)) return he(ue(e, {\n      lvl: o - 1\n    }));\n    if (X(t) || X(t.r)) throw new Error(\"Unexpected empty nodes\");\n    return ue(t.r, {\n      l: ue(t, {\n        r: t.r.l\n      }),\n      r: ue(e, {\n        l: t.r.r,\n        lvl: o - 1\n      }),\n      lvl: o\n    });\n  }\n\n  if (se(e)) return me(ue(e, {\n    lvl: o - 1\n  }));\n  if (X(n) || X(n.l)) throw new Error(\"Unexpected empty nodes\");\n  var r = n.l,\n      i = se(r) ? n.lvl - 1 : n.lvl;\n  return ue(r, {\n    l: ue(e, {\n      r: r.l,\n      lvl: o - 1\n    }),\n    r: me(ue(n, {\n      l: r.r,\n      lvl: i\n    })),\n    lvl: r.lvl + 1\n  });\n}\n\nfunction de(e, t, n) {\n  return X(e) ? [] : fe(re(e, ne(e, t)[0], n), function (e) {\n    return {\n      index: e.k,\n      value: e.v\n    };\n  });\n}\n\nfunction fe(e, t) {\n  var n = e.length;\n  if (0 === n) return [];\n\n  for (var o = t(e[0]), r = o.index, i = o.value, l = [], a = 1; a < n; a++) {\n    var u = t(e[a]),\n        s = u.index,\n        c = u.value;\n    l.push({\n      start: r,\n      end: s - 1,\n      value: i\n    }), r = s, i = c;\n  }\n\n  return l.push({\n    start: r,\n    end: Infinity,\n    value: i\n  }), l;\n}\n\nfunction me(e) {\n  var t = e.r,\n      n = e.lvl;\n  return X(t) || X(t.r) || t.lvl !== n || t.r.lvl !== n ? e : ue(t, {\n    l: ue(e, {\n      r: t.l\n    }),\n    lvl: n + 1\n  });\n}\n\nfunction he(e) {\n  var t = e.l;\n  return X(t) || t.lvl !== e.lvl ? e : ue(t, {\n    r: ue(e, {\n      l: t.r\n    })\n  });\n}\n\nfunction pe(e, t, n, o) {\n  void 0 === o && (o = 0);\n\n  for (var r = e.length - 1; o <= r;) {\n    var i = Math.floor((o + r) / 2),\n        l = n(e[i], t);\n    if (0 === l) return i;\n\n    if (-1 === l) {\n      if (r - o < 2) return i - 1;\n      r = i - 1;\n    } else {\n      if (r === o) return i;\n      o = i + 1;\n    }\n  }\n\n  throw new Error(\"Failed binary finding record in array - \" + e.join(\",\") + \", searched for \" + t);\n}\n\nfunction ge(e, t, n) {\n  return e[pe(e, t, n)];\n}\n\nfunction ve(e, t) {\n  return Math.round(e.getBoundingClientRect()[t]);\n}\n\nfunction Ie(e) {\n  var t = e.size,\n      n = e.startIndex,\n      o = e.endIndex;\n  return function (e) {\n    return e.start === n && (e.end === o || Infinity === e.end) && e.value === t;\n  };\n}\n\nfunction Ce(e, t) {\n  var n = e.index;\n  return t === n ? 0 : t < n ? -1 : 1;\n}\n\nfunction Se(e, t) {\n  var n = e.offset;\n  return t === n ? 0 : t < n ? -1 : 1;\n}\n\nfunction Te(e) {\n  return {\n    index: e.index,\n    value: e\n  };\n}\n\nfunction xe(e, t) {\n  var n = t[0],\n      o = t[1];\n  n.length > 0 && (0, t[2])(\"received item sizes\", n, N.DEBUG);\n  var r = e.sizeTree,\n      i = e.offsetTree,\n      l = r,\n      a = 0;\n\n  if (o.length > 0 && X(r) && 2 === n.length) {\n    var u = n[0].size,\n        s = n[1].size;\n    l = o.reduce(function (e, t) {\n      return oe(oe(e, t, u), t + 1, s);\n    }, l);\n  } else {\n    var c = function (e, t) {\n      for (var n, o = X(e) ? 0 : Infinity, r = W(t); !(n = r()).done;) {\n        var i = n.value,\n            l = i.size,\n            a = i.startIndex,\n            u = i.endIndex;\n        if (o = Math.min(o, a), X(e)) e = oe(e, 0, l);else {\n          var s = de(e, a - 1, u + 1);\n\n          if (!s.some(Ie(i))) {\n            for (var c, d = !1, f = !1, m = W(s); !(c = m()).done;) {\n              var h = c.value,\n                  p = h.start,\n                  g = h.end,\n                  v = h.value;\n              d ? (u >= p || l === v) && (e = te(e, p)) : (f = v !== l, d = !0), g > u && u >= p && v !== l && (e = oe(e, u + 1, v));\n            }\n\n            f && (e = oe(e, a, l));\n          }\n        }\n      }\n\n      return [e, o];\n    }(l, n);\n\n    l = c[0], a = c[1];\n  }\n\n  if (l === r) return e;\n  var d = 0,\n      f = 0,\n      m = 0,\n      h = 0;\n\n  if (0 !== a) {\n    h = pe(i, a - 1, Ce), m = i[h].offset;\n    var p = ne(l, a - 1);\n    d = p[0], f = p[1], i.length && i[h].size === ne(l, a)[1] && (h -= 1), i = i.slice(0, h + 1);\n  } else i = [];\n\n  for (var g, v = W(de(l, a, Infinity)); !(g = v()).done;) {\n    var I = g.value,\n        C = I.start,\n        S = I.value,\n        T = (C - d) * f + m;\n    i.push({\n      offset: T,\n      size: S,\n      index: C\n    }), d = C, m = T, f = S;\n  }\n\n  return {\n    sizeTree: l,\n    offsetTree: i,\n    groupOffsetTree: o.reduce(function (e, t) {\n      return oe(e, t, we(t, i));\n    }, ee()),\n    lastIndex: d,\n    lastOffset: m,\n    lastSize: f,\n    groupIndices: o\n  };\n}\n\nfunction we(e, t) {\n  if (0 === t.length) return 0;\n  var n = ge(t, e, Ce);\n  return n.size * (e - n.index) + n.offset;\n}\n\nfunction ye(e, t) {\n  if (!be(t)) return e;\n\n  for (var n = 0; t.groupIndices[n] <= e + n;) n++;\n\n  return e + n;\n}\n\nfunction be(e) {\n  return !X(e.groupOffsetTree);\n}\n\nvar He = {\n  offsetHeight: \"height\",\n  offsetWidth: \"width\"\n},\n    Re = t(function (e) {\n  var t = e[0].log,\n      f = n(),\n      m = n(),\n      h = I(m, 0),\n      p = n(),\n      g = o(0),\n      v = o([]),\n      C = o(void 0),\n      T = o(void 0),\n      x = o(function (e, t) {\n    return ve(e, He[t]);\n  }),\n      y = o(void 0),\n      b = {\n    offsetTree: [],\n    sizeTree: ee(),\n    groupOffsetTree: ee(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: []\n  },\n      H = I(i(f, w(v, t), S(xe, b), c()), b);\n  r(i(v, s(function (e) {\n    return e.length > 0;\n  }), w(H), l(function (e) {\n    var t = e[0],\n        n = e[1],\n        o = t.reduce(function (e, t, o) {\n      return oe(e, t, we(t, n.offsetTree) || o);\n    }, ee());\n    return M({}, n, {\n      groupIndices: t,\n      groupOffsetTree: o\n    });\n  })), H), r(i(m, w(H), s(function (e) {\n    return e[0] < e[1].lastIndex;\n  }), l(function (e) {\n    var t = e[1];\n    return [{\n      startIndex: e[0],\n      endIndex: t.lastIndex,\n      size: t.lastSize\n    }];\n  })), f), r(C, T);\n  var R = I(i(C, l(function (e) {\n    return void 0 === e;\n  })), !0);\n  r(i(T, s(function (e) {\n    return void 0 !== e && X(a(H).sizeTree);\n  }), l(function (e) {\n    return [{\n      startIndex: 0,\n      endIndex: 0,\n      size: e\n    }];\n  })), f);\n  var z = u(i(f, w(H), S(function (e, t) {\n    var n = t[1];\n    return {\n      changed: n !== e.sizes,\n      sizes: n\n    };\n  }, {\n    changed: !1,\n    sizes: b\n  }), l(function (e) {\n    return e.changed;\n  })));\n  r(i(g, S(function (e, t) {\n    return {\n      diff: e.prev - t,\n      prev: t\n    };\n  }, {\n    diff: 0,\n    prev: 0\n  }), l(function (e) {\n    return e.diff;\n  }), s(function (e) {\n    return e > 0;\n  })), p), d(i(g, w(t)), function (e) {\n    e[0] < 0 && (0, e[1])(\"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\", {\n      firstItemIndex: g\n    }, N.ERROR);\n  });\n  var k = u(p);\n  return r(i(p, w(H), l(function (e) {\n    var t = e[0],\n        n = e[1];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: prepending items does not work with groups\");\n    return ie(n.sizeTree).reduce(function (e, n) {\n      var o = n.k,\n          r = n.v;\n      return {\n        ranges: [].concat(e.ranges, [{\n          startIndex: e.prevIndex,\n          endIndex: o + t - 1,\n          size: e.prevSize\n        }]),\n        prevIndex: o + t,\n        prevSize: r\n      };\n    }, {\n      ranges: [],\n      prevIndex: 0,\n      prevSize: n.lastSize\n    }).ranges;\n  })), f), {\n    data: y,\n    totalCount: m,\n    sizeRanges: f,\n    groupIndices: v,\n    defaultItemSize: T,\n    fixedItemSize: C,\n    unshiftWith: p,\n    beforeUnshiftWith: k,\n    firstItemIndex: g,\n    sizes: H,\n    listRefresh: z,\n    statefulTotalCount: h,\n    trackItemSizes: R,\n    itemSize: x\n  };\n}, f(j), {\n  singleton: !0\n}),\n    ze = \"undefined\" != typeof document && \"scrollBehavior\" in document.documentElement.style;\n\nfunction ke(e) {\n  var t = \"number\" == typeof e ? {\n    index: e\n  } : e;\n  return t.align || (t.align = \"start\"), t.behavior && ze || (t.behavior = \"auto\"), t.offset || (t.offset = 0), t;\n}\n\nvar Be = t(function (e) {\n  var t = e[0],\n      a = t.sizes,\n      u = t.totalCount,\n      s = t.listRefresh,\n      c = e[1],\n      f = c.scrollingInProgress,\n      m = c.viewportHeight,\n      h = c.scrollTo,\n      p = c.smoothScrollTargetReached,\n      g = c.headerHeight,\n      v = c.footerHeight,\n      I = e[2].log,\n      C = n(),\n      S = o(0),\n      x = null,\n      b = null,\n      H = null;\n\n  function R() {\n    x && (x(), x = null), H && (H(), H = null), b && (clearTimeout(b), b = null), T(f, !1);\n  }\n\n  return r(i(C, w(a, m, u, S, g, v, I), l(function (e) {\n    var t = e[0],\n        n = e[1],\n        o = e[2],\n        r = e[3],\n        l = e[4],\n        a = e[5],\n        u = e[6],\n        c = e[7],\n        m = ke(t),\n        h = m.align,\n        g = m.behavior,\n        v = m.offset,\n        I = r - 1,\n        S = m.index;\n    \"LAST\" === S && (S = I), S = ye(S, n);\n    var w = we(S = Math.max(0, S, Math.min(I, S)), n.offsetTree) + a;\n    \"end\" === h ? (w = w - o + ne(n.sizeTree, S)[1], S === I && (w += u)) : \"center\" === h ? w = w - o / 2 + ne(n.sizeTree, S)[1] / 2 : w -= l, v && (w += v);\n\n    var z = function (e) {\n      R(), e ? (c(\"retrying to scroll to\", {\n        location: t\n      }, N.DEBUG), T(C, t)) : c(\"list did not change, scroll successful\", {}, N.DEBUG);\n    };\n\n    if (R(), \"smooth\" === g) {\n      var k = !1;\n      H = d(s, function (e) {\n        k = k || e;\n      }), x = y(p, function () {\n        z(k);\n      });\n    } else x = y(i(s, function (e) {\n      var t = setTimeout(function () {\n        e(!1);\n      }, 50);\n      return function (n) {\n        n && (e(!0), clearTimeout(t));\n      };\n    }), z);\n\n    return b = setTimeout(function () {\n      R();\n    }, 1200), T(f, !0), c(\"scrolling from index to\", {\n      index: S,\n      top: w,\n      behavior: g\n    }, N.DEBUG), {\n      top: w,\n      behavior: g\n    };\n  })), h), {\n    scrollToIndex: C,\n    topListHeight: S\n  };\n}, f(Re, U, j), {\n  singleton: !0\n});\n\nfunction Ee(e, t, n) {\n  return \"number\" == typeof e ? n === Y && \"top\" === t || \"down\" === n && \"bottom\" === t ? e : 0 : n === Y ? \"top\" === t ? e.main : e.reverse : \"bottom\" === t ? e.main : e.reverse;\n}\n\nfunction Le(e, t) {\n  return \"number\" == typeof e ? e : e[t] || 0;\n}\n\nvar Pe = t(function (e) {\n  var t = e[0],\n      r = t.scrollTop,\n      a = t.viewportHeight,\n      u = t.deviation,\n      d = t.headerHeight,\n      f = n(),\n      m = o(0),\n      p = o(0),\n      g = o(0),\n      v = o(0);\n  return {\n    listBoundary: f,\n    overscan: v,\n    topListHeight: m,\n    fixedHeaderHeight: p,\n    increaseViewportBy: g,\n    visibleRange: I(i(C(h(r), h(a), h(d), h(f, D), h(v), h(m), h(p), h(u), h(g)), l(function (e) {\n      var t = e[0],\n          n = e[1],\n          o = e[2],\n          r = e[3],\n          i = r[0],\n          l = r[1],\n          a = e[4],\n          u = e[6],\n          s = e[7],\n          c = e[8],\n          d = t - s,\n          f = e[5] + u,\n          m = Math.max(o - d, 0),\n          h = \"none\",\n          p = Le(c, \"top\"),\n          g = Le(c, \"bottom\");\n      return i -= s, l += o, (i += o) > t + f - p && (h = Y), (l -= s) < t - m + n + g && (h = \"down\"), \"none\" !== h ? [Math.max(d - o - Ee(a, \"top\", h) - p, 0), d - m - u + n + Ee(a, \"bottom\", h) + g] : null;\n    }), s(function (e) {\n      return null != e;\n    }), c(D)), [0, 0])\n  };\n}, f(U), {\n  singleton: !0\n}),\n    Oe = t(function (e) {\n  var t = e[0],\n      a = t.scrollTo,\n      u = t.scrollContainerState,\n      s = n(),\n      c = n(),\n      d = n(),\n      f = o(!1),\n      m = o(void 0);\n  return r(i(C(s, c), l(function (e) {\n    var t = e[0],\n        n = t[1];\n    return [Math.max(0, t[0] - e[1].offsetTop), n];\n  })), u), r(i(a, w(c), l(function (e) {\n    var t = e[0];\n    return M({}, t, {\n      top: t.top + e[1].offsetTop\n    });\n  })), d), {\n    useWindowScroll: f,\n    customScrollParent: m,\n    windowScrollContainerState: s,\n    windowViewportRect: c,\n    windowScrollTo: d\n  };\n}, f(U)),\n    Me = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Ae = {\n  items: [{\n    index: 0\n  }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Ve = Math.ceil,\n    We = Math.floor,\n    De = Math.min,\n    Fe = Math.max;\n\nfunction Ge(e) {\n  return Ve(e) - e < .03 ? Ve(e) : We(e);\n}\n\nfunction Ne(e, t) {\n  return Array.from({\n    length: t - e + 1\n  }).map(function (t, n) {\n    return {\n      index: n + e\n    };\n  });\n}\n\nvar Ue = t(function (e) {\n  var t = e[0],\n      a = t.overscan,\n      d = t.visibleRange,\n      f = t.listBoundary,\n      m = e[1],\n      p = m.scrollTop,\n      v = m.viewportHeight,\n      S = m.scrollBy,\n      T = m.scrollTo,\n      x = m.smoothScrollTargetReached,\n      y = m.scrollContainerState,\n      b = e[2],\n      H = e[3],\n      R = e[4],\n      z = R.propsReady,\n      k = R.didMount,\n      B = e[5],\n      E = B.windowViewportRect,\n      L = B.windowScrollTo,\n      P = B.useWindowScroll,\n      O = B.customScrollParent,\n      A = B.windowScrollContainerState,\n      V = o(0),\n      W = o(0),\n      G = o(Me),\n      N = o({\n    height: 0,\n    width: 0\n  }),\n      U = o({\n    height: 0,\n    width: 0\n  }),\n      _ = n(),\n      j = n(),\n      K = o(0);\n\n  r(i(k, w(W), s(function (e) {\n    return 0 !== e[1];\n  }), l(function (e) {\n    return {\n      items: Ne(0, e[1] - 1),\n      top: 0,\n      bottom: 0,\n      offsetBottom: 0,\n      offsetTop: 0,\n      itemHeight: 0,\n      itemWidth: 0\n    };\n  })), G), r(i(C(h(V), d, h(U, function (e, t) {\n    return e && e.width === t.width && e.height === t.height;\n  })), w(N), l(function (e) {\n    var t = e[0],\n        n = t[0],\n        o = t[1],\n        r = o[0],\n        i = o[1],\n        l = t[2],\n        a = e[1],\n        u = l.height,\n        s = l.width,\n        c = a.width;\n    if (0 === n || 0 === c) return Me;\n    if (0 === s) return Ae;\n    var d = Ge(c / s),\n        f = d * We(r / u),\n        m = d * Ve(i / u) - 1;\n    m = De(n - 1, m);\n\n    var h = Ne(f = De(m, Fe(0, f)), m),\n        p = _e(a, l, h),\n        g = p.top,\n        v = p.bottom;\n\n    return {\n      items: h,\n      offsetTop: g,\n      offsetBottom: Ve(n / d) * u - v,\n      top: g,\n      bottom: v,\n      itemHeight: u,\n      itemWidth: s\n    };\n  })), G), r(i(N, l(function (e) {\n    return e.height;\n  })), v), r(i(C(N, U, G), l(function (e) {\n    var t = _e(e[0], e[1], e[2].items);\n\n    return [t.top, t.bottom];\n  }), c(D)), f);\n  var Y = u(i(h(G), s(function (e) {\n    return e.items.length > 0;\n  }), w(V), s(function (e) {\n    var t = e[0].items;\n    return t[t.length - 1].index === e[1] - 1;\n  }), l(function (e) {\n    return e[1] - 1;\n  }), c())),\n      Z = u(i(h(G), s(function (e) {\n    var t = e.items;\n    return t.length > 0 && 0 === t[0].index;\n  }), g(0), c())),\n      q = u(i(h(G), s(function (e) {\n    return e.items.length > 0;\n  }), l(function (e) {\n    var t = e.items;\n    return {\n      startIndex: t[0].index,\n      endIndex: t[t.length - 1].index\n    };\n  }), c(F)));\n  r(q, H.scrollSeekRangeChanged), r(i(_, w(N, U, V), l(function (e) {\n    var t = e[1],\n        n = e[2],\n        o = e[3],\n        r = ke(e[0]),\n        i = r.align,\n        l = r.behavior,\n        a = r.offset,\n        u = r.index;\n    \"LAST\" === u && (u = o - 1);\n    var s = je(t, n, u = Math.max(0, u, Math.min(o - 1, u)));\n    return \"end\" === i ? s = Math.round(s - t.height + n.height) : \"center\" === i && (s = Math.round(s - t.height / 2 + n.height / 2)), a && (s += a), {\n      top: s,\n      behavior: l\n    };\n  })), T);\n  var J = I(i(G, l(function (e) {\n    return e.offsetBottom + e.bottom;\n  })), 0);\n  return r(i(E, l(function (e) {\n    return {\n      width: e.visibleWidth,\n      height: e.visibleHeight\n    };\n  })), N), M({\n    totalCount: V,\n    viewportDimensions: N,\n    itemDimensions: U,\n    scrollTop: p,\n    scrollHeight: j,\n    overscan: a,\n    scrollBy: S,\n    scrollTo: T,\n    scrollToIndex: _,\n    smoothScrollTargetReached: x,\n    windowViewportRect: E,\n    windowScrollTo: L,\n    useWindowScroll: P,\n    customScrollParent: O,\n    windowScrollContainerState: A,\n    deviation: K,\n    scrollContainerState: y,\n    initialItemCount: W\n  }, H, {\n    gridState: G,\n    totalListHeight: J\n  }, b, {\n    startReached: Z,\n    endReached: Y,\n    rangeChanged: q,\n    propsReady: z\n  });\n}, f(Pe, U, q, J, K, Oe));\n\nfunction _e(e, t, n) {\n  var o = t.height;\n  return void 0 === o || 0 === n.length ? {\n    top: 0,\n    bottom: 0\n  } : {\n    top: je(e, t, n[0].index),\n    bottom: je(e, t, n[n.length - 1].index) + o\n  };\n}\n\nfunction je(e, t, n) {\n  var o = Ge(e.width / t.width);\n  return We(n / o) * t.height;\n}\n\nfunction Ke(e, t) {\n  void 0 === t && (t = !0);\n\n  var n = k(null),\n      o = function (e) {};\n\n  if (\"undefined\" != typeof ResizeObserver) {\n    var r = new ResizeObserver(function (t) {\n      var n = t[0].target;\n      null !== n.offsetParent && e(n);\n    });\n\n    o = function (e) {\n      e && t ? (r.observe(e), n.current = e) : (n.current && r.unobserve(n.current), n.current = null);\n    };\n  }\n\n  return {\n    ref: n,\n    callbackRef: o\n  };\n}\n\nfunction Ye(e, t) {\n  return void 0 === t && (t = !0), Ke(e, t).callbackRef;\n}\n\nfunction Ze(e, t) {\n  var n = k(null),\n      o = B(function (o) {\n    if (null !== o) {\n      var r,\n          i,\n          l = o.getBoundingClientRect(),\n          a = l.width;\n\n      if (t) {\n        var u = t.getBoundingClientRect(),\n            s = l.top - u.top;\n        r = u.height - Math.max(0, s), i = s + t.scrollTop;\n      } else r = window.innerHeight - Math.max(0, l.top), i = l.top + window.pageYOffset;\n\n      n.current = {\n        offsetTop: i,\n        visibleHeight: r,\n        visibleWidth: a\n      }, e(n.current);\n    }\n  }, [e, t]),\n      r = Ke(o),\n      i = r.callbackRef,\n      l = r.ref,\n      a = B(function () {\n    o(l.current);\n  }, [o, l]);\n  return E(function () {\n    if (t) {\n      t.addEventListener(\"scroll\", a);\n      var e = new ResizeObserver(a);\n      return e.observe(t), function () {\n        t.removeEventListener(\"scroll\", a), e.unobserve(t);\n      };\n    }\n\n    return window.addEventListener(\"scroll\", a), window.addEventListener(\"resize\", a), function () {\n      window.removeEventListener(\"scroll\", a), window.removeEventListener(\"resize\", a);\n    };\n  }, [a, t]), i;\n}\n\nvar qe = \"undefined\" != typeof document ? L : E;\n\nfunction Je(e, t, n, o, r, i) {\n  return Ye(function (n) {\n    for (var l = function (e, t, n, o) {\n      var r = e.length;\n      if (0 === r) return null;\n\n      for (var i = [], l = 0; l < r; l++) {\n        var a = e.item(l);\n\n        if (a && void 0 !== a.dataset.index) {\n          var u = parseInt(a.dataset.index),\n              s = parseFloat(a.dataset.knownSize),\n              c = t(a, \"offsetHeight\");\n\n          if (0 === c && o(\"Zero-sized element, this should not happen\", {\n            child: a\n          }, N.ERROR), c !== s) {\n            var d = i[i.length - 1];\n            0 === i.length || d.size !== c || d.endIndex !== u - 1 ? i.push({\n              startIndex: u,\n              endIndex: u,\n              size: c\n            }) : i[i.length - 1].endIndex++;\n          }\n        }\n      }\n\n      return i;\n    }(n.children, t, 0, r), a = n.parentElement; !a.dataset.virtuosoScroller;) a = a.parentElement;\n\n    var u = i ? i.scrollTop : \"window\" === a.firstElementChild.dataset.viewportType ? window.pageYOffset || document.documentElement.scrollTop : a.scrollTop;\n    o(i ? [Math.max(u, 0), i.scrollHeight] : [Math.max(u, 0), a.scrollHeight]), null !== l && e(l);\n  }, n);\n}\n\nfunction $e(e, t, n, o, r) {\n  void 0 === o && (o = b);\n  var i = k(null),\n      l = k(null),\n      a = k(null),\n      u = B(function (n) {\n    var o = n.target,\n        r = o === window || o === document ? window.pageYOffset || document.documentElement.scrollTop : o.scrollTop,\n        i = o === window ? document.documentElement.scrollHeight : o.scrollHeight;\n    e([Math.max(r, 0), i]), null !== l.current && (r === l.current || r <= 0 || r === o.scrollHeight - ve(o, \"height\")) && (l.current = null, t(!0), a.current && (clearTimeout(a.current), a.current = null));\n  }, [e, t]);\n  return E(function () {\n    var e = r || i.current;\n    return o(r || i.current), u({\n      target: e\n    }), e.addEventListener(\"scroll\", u, {\n      passive: !0\n    }), function () {\n      o(null), e.removeEventListener(\"scroll\", u);\n    };\n  }, [i, u, n, o, r]), {\n    scrollerRef: i,\n    scrollByCallback: function (e) {\n      null === l.current && i.current.scrollBy(e);\n    },\n    scrollToCallback: function (n) {\n      var o = i.current;\n\n      if (o && (!(\"offsetHeight\" in o) || 0 !== o.offsetHeight)) {\n        var r,\n            u,\n            s,\n            c = \"smooth\" === n.behavior;\n        if (o === window ? (u = Math.max(ve(document.documentElement, \"height\"), document.documentElement.scrollHeight), r = window.innerHeight, s = document.documentElement.scrollTop) : (u = o.scrollHeight, r = ve(o, \"height\"), s = o.scrollTop), n.top = Math.ceil(Math.max(Math.min(u - r, n.top), 0)), Math.abs(r - u) < 1.01 || n.top === s) return e([s, u]), void (c && t(!0));\n        c ? (l.current = n.top, a.current && clearTimeout(a.current), a.current = setTimeout(function () {\n          a.current = null, l.current = null, t(!0);\n        }, 1e3)) : l.current = null, o.scrollTo(n);\n      }\n    }\n  };\n}\n\nvar Qe = t(function (e) {\n  var t = e[0],\n      n = t.sizes,\n      l = t.listRefresh,\n      a = t.defaultItemSize,\n      u = e[1].scrollTop,\n      c = e[2].scrollToIndex,\n      f = e[3].didMount,\n      m = o(!0),\n      h = o(0);\n  return r(i(f, w(h), s(function (e) {\n    return 0 !== e[1];\n  }), g(!1)), m), d(i(C(l, f), w(m, n, a), s(function (e) {\n    var t = e[1],\n        n = e[3];\n    return e[0][1] && (!X(e[2].sizeTree) || void 0 !== n) && !t;\n  }), w(h)), function (e) {\n    var t = e[1];\n    setTimeout(function () {\n      y(u, function () {\n        T(m, !0);\n      }), T(c, t);\n    });\n  }), {\n    scrolledToInitialItem: m,\n    initialTopMostItemIndex: h\n  };\n}, f(Re, U, Be, K), {\n  singleton: !0\n});\n\nfunction Xe(e) {\n  return !!e && (\"smooth\" === e ? \"smooth\" : \"auto\");\n}\n\nvar et = t(function (e) {\n  var t = e[0],\n      n = t.totalCount,\n      r = t.listRefresh,\n      u = e[1],\n      c = u.isAtBottom,\n      f = u.atBottomState,\n      m = e[2].scrollToIndex,\n      g = e[3].scrolledToInitialItem,\n      v = e[4],\n      I = v.propsReady,\n      x = v.didMount,\n      b = e[5].log,\n      H = e[6].scrollingInProgress,\n      R = o(!1),\n      z = null;\n\n  function k(e) {\n    T(m, {\n      index: \"LAST\",\n      align: \"end\",\n      behavior: e\n    });\n  }\n\n  return d(i(C(i(h(n), p(1)), x), w(h(R), c, g, H), l(function (e) {\n    var t = e[0],\n        n = t[0],\n        o = t[1] && e[3],\n        r = \"auto\";\n    return o && (r = function (e, t) {\n      return \"function\" == typeof e ? Xe(e(t)) : t && Xe(e);\n    }(e[1], e[2] || e[4]), o = o && !!r), {\n      totalCount: n,\n      shouldFollow: o,\n      followOutputBehavior: r\n    };\n  }), s(function (e) {\n    return e.shouldFollow;\n  })), function (e) {\n    var t = e.totalCount,\n        n = e.followOutputBehavior;\n    z && (z(), z = null), z = y(r, function () {\n      a(b)(\"following output to \", {\n        totalCount: t\n      }, N.DEBUG), k(n), z = null;\n    });\n  }), d(i(C(h(R), n, I), s(function (e) {\n    return e[0] && e[2];\n  }), S(function (e, t) {\n    var n = t[1];\n    return {\n      refreshed: e.value === n,\n      value: n\n    };\n  }, {\n    refreshed: !1,\n    value: 0\n  }), s(function (e) {\n    return e.refreshed;\n  }), w(R, n)), function (e) {\n    var t = e[1],\n        n = y(f, function (e) {\n      !t || e.atBottom || \"SIZE_INCREASED\" !== e.notAtBottomBecause || z || (a(b)(\"scrolling to bottom due to increased size\", {}, N.DEBUG), k(\"auto\"));\n    });\n    setTimeout(n, 100);\n  }), d(C(h(R), f), function (e) {\n    var t = e[1];\n    e[0] && !t.atBottom && \"VIEWPORT_HEIGHT_DECREASING\" === t.notAtBottomBecause && k(\"auto\");\n  }), {\n    followOutput: R\n  };\n}, f(Re, q, Be, Qe, K, j, U));\n\nfunction tt(e) {\n  return e.reduce(function (e, t) {\n    return e.groupIndices.push(e.totalCount), e.totalCount += t + 1, e;\n  }, {\n    totalCount: 0,\n    groupIndices: []\n  });\n}\n\nvar nt = t(function (e) {\n  var t = e[0],\n      o = t.totalCount,\n      a = t.groupIndices,\n      d = t.sizes,\n      f = e[1],\n      m = f.scrollTop,\n      h = f.headerHeight,\n      p = n(),\n      g = n(),\n      v = u(i(p, l(tt)));\n  return r(i(v, l(H(\"totalCount\"))), o), r(i(v, l(H(\"groupIndices\"))), a), r(i(C(m, d, h), s(function (e) {\n    return be(e[1]);\n  }), l(function (e) {\n    return ne(e[1].groupOffsetTree, Math.max(e[0] - e[2], 0), \"v\")[0];\n  }), c(), l(function (e) {\n    return [e];\n  })), g), {\n    groupCounts: p,\n    topItemsIndexes: g\n  };\n}, f(Re, U)),\n    ot = {\n  items: [],\n  topItems: [],\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0\n};\n\nfunction rt(e, t, n) {\n  if (0 === e.length) return [];\n  if (!be(t)) return e.map(function (e) {\n    return M({}, e, {\n      index: e.index + n,\n      originalIndex: e.index\n    });\n  });\n\n  for (var o, r = [], i = de(t.groupOffsetTree, e[0].index, e[e.length - 1].index), l = void 0, a = 0, u = W(e); !(o = u()).done;) {\n    var s = o.value;\n    (!l || l.end < s.index) && (l = i.shift(), a = t.groupIndices.indexOf(l.start)), r.push(M({}, s.index === l.start ? {\n      type: \"group\",\n      index: a\n    } : {\n      index: s.index - (a + 1) + n,\n      groupIndex: a\n    }, {\n      size: s.size,\n      offset: s.offset,\n      originalIndex: s.index,\n      data: s.data\n    }));\n  }\n\n  return r;\n}\n\nfunction it(e, t, n, o, r) {\n  var i = 0,\n      l = 0;\n\n  if (e.length > 0) {\n    i = e[0].offset;\n    var a = e[e.length - 1];\n    l = a.offset + a.size;\n  }\n\n  var u = i,\n      s = o.lastOffset + (n - o.lastIndex) * o.lastSize - l;\n  return {\n    items: rt(e, o, r),\n    topItems: rt(t, o, r),\n    topListHeight: t.reduce(function (e, t) {\n      return t.size + e;\n    }, 0),\n    offsetTop: i,\n    offsetBottom: s,\n    top: u,\n    bottom: l,\n    totalCount: n\n  };\n}\n\nvar lt,\n    at,\n    ut,\n    st = t(function (e) {\n  var t = e[0],\n      a = t.sizes,\n      d = t.totalCount,\n      f = t.data,\n      m = t.firstItemIndex,\n      p = e[1],\n      g = e[2],\n      v = g.visibleRange,\n      S = g.listBoundary,\n      T = g.topListHeight,\n      y = e[3],\n      b = y.scrolledToInitialItem,\n      z = y.initialTopMostItemIndex,\n      k = e[4].topListHeight,\n      B = e[5],\n      E = e[6].didMount,\n      L = o([]),\n      P = n();\n  r(p.topItemsIndexes, L);\n  var O = I(i(C(E, h(v), h(d), h(a), h(z), b, h(L), h(m), f), s(function (e) {\n    return e[0];\n  }), l(function (e) {\n    var t = e[1],\n        n = t[0],\n        o = t[1],\n        r = e[2],\n        i = e[4],\n        l = e[5],\n        a = e[6],\n        u = e[7],\n        s = e[8],\n        c = e[3],\n        d = c.sizeTree,\n        f = c.offsetTree;\n    if (0 === r || 0 === n && 0 === o) return ot;\n    if (X(d)) return it(function (e, t, n) {\n      if (be(t)) {\n        var o = ye(e, t);\n        return [{\n          index: ne(t.groupOffsetTree, o)[0],\n          size: 0,\n          offset: 0\n        }, {\n          index: o,\n          size: 0,\n          offset: 0,\n          data: n && n[0]\n        }];\n      }\n\n      return [{\n        index: e,\n        size: 0,\n        offset: 0,\n        data: n && n[0]\n      }];\n    }(i, c, s), [], r, c, u);\n    var m = [];\n    if (a.length > 0) for (var h, p = a[0], g = a[a.length - 1], v = 0, I = W(de(d, p, g)); !(h = I()).done;) for (var C = h.value, S = C.value, T = Math.max(C.start, p), x = Math.min(C.end, g), w = T; w <= x; w++) m.push({\n      index: w,\n      size: S,\n      offset: v,\n      data: s && s[w]\n    }), v += S;\n    if (!l) return it([], m, r, c, u);\n\n    var y = a.length > 0 ? a[a.length - 1] + 1 : 0,\n        b = function (e, t, n, o) {\n      return void 0 === o && (o = 0), o > 0 && (t = Math.max(t, ge(e, o, Ce).offset)), fe((i = n, a = pe(r = e, t, l = Se), u = pe(r, i, l, a), r.slice(a, u + 1)), Te);\n      var r, i, l, a, u;\n    }(f, n, o, y);\n\n    if (0 === b.length) return null;\n    var H = r - 1;\n    return it(R([], function (e) {\n      for (var t, r = W(b); !(t = r()).done;) {\n        var i = t.value,\n            l = i.value,\n            a = l.offset,\n            u = i.start,\n            c = l.size;\n        l.offset < n && (a += ((u += Math.floor((n - l.offset) / c)) - i.start) * c), u < y && (a += (y - u) * c, u = y);\n\n        for (var d = Math.min(i.end, H), f = u; f <= d && !(a >= o); f++) e.push({\n          index: f,\n          size: c,\n          offset: a,\n          data: s && s[f]\n        }), a += c;\n      }\n    }), m, r, c, u);\n  }), s(function (e) {\n    return null !== e;\n  }), c()), ot);\n  return r(i(f, s(function (e) {\n    return void 0 !== e;\n  }), l(function (e) {\n    return e.length;\n  })), d), r(i(O, l(H(\"topListHeight\"))), k), r(k, T), r(i(O, l(function (e) {\n    return [e.top, e.bottom];\n  })), S), r(i(O, l(function (e) {\n    return e.items;\n  })), P), M({\n    listState: O,\n    topItemsIndexes: L,\n    endReached: u(i(O, s(function (e) {\n      return e.items.length > 0;\n    }), w(d, f), s(function (e) {\n      var t = e[0].items;\n      return t[t.length - 1].originalIndex === e[1] - 1;\n    }), l(function (e) {\n      return [e[1] - 1, e[2]];\n    }), c(D), l(function (e) {\n      return e[0];\n    }))),\n    startReached: u(i(O, x(200), s(function (e) {\n      var t = e.items;\n      return t.length > 0 && t[0].originalIndex === e.topItems.length;\n    }), l(function (e) {\n      return e.items[0].index;\n    }), c())),\n    rangeChanged: u(i(O, s(function (e) {\n      return e.items.length > 0;\n    }), l(function (e) {\n      var t = e.items;\n      return {\n        startIndex: t[0].index,\n        endIndex: t[t.length - 1].index\n      };\n    }), c(F))),\n    itemsRendered: P\n  }, B);\n}, f(Re, nt, Pe, Qe, Be, q, K), {\n  singleton: !0\n}),\n    ct = t(function (e) {\n  var t = e[0],\n      n = t.sizes,\n      a = t.firstItemIndex,\n      u = t.data,\n      c = e[1].listState,\n      d = e[2].didMount,\n      f = o(0);\n  return r(i(d, w(f), s(function (e) {\n    return 0 !== e[1];\n  }), w(n, a, u), l(function (e) {\n    var t = e[0][1],\n        n = e[1],\n        o = e[2],\n        r = e[3],\n        i = void 0 === r ? [] : r,\n        l = 0;\n    if (n.groupIndices.length > 0) for (var a, u = W(n.groupIndices); !((a = u()).done || a.value - l >= t);) l++;\n    var s = t + l;\n    return it(Array.from({\n      length: s\n    }).map(function (e, t) {\n      return {\n        index: t,\n        size: 0,\n        offset: 0,\n        data: i[t]\n      };\n    }), [], s, n, o);\n  })), c), {\n    initialItemCount: f\n  };\n}, f(Re, st, K), {\n  singleton: !0\n}),\n    dt = t(function (e) {\n  var t = e[0].topItemsIndexes,\n      n = o(0);\n  return r(i(n, s(function (e) {\n    return e > 0;\n  }), l(function (e) {\n    return Array.from({\n      length: e\n    }).map(function (e, t) {\n      return t;\n    });\n  })), t), {\n    topItemCount: n\n  };\n}, f(st)),\n    ft = t(function (e) {\n  var t = e[0],\n      o = t.footerHeight,\n      a = t.headerHeight,\n      u = e[1].listState,\n      s = n(),\n      c = I(i(C(o, a, u), l(function (e) {\n    var t = e[2];\n    return e[0] + e[1] + t.offsetBottom + t.bottom;\n  })), 0);\n  return r(h(c), s), {\n    totalListHeight: c,\n    totalListHeightChanged: s\n  };\n}, f(U, st), {\n  singleton: !0\n}),\n    mt = t(function (e) {\n  var t = e[0],\n      n = t.scrollBy,\n      o = t.scrollTop,\n      a = t.deviation,\n      c = t.scrollingInProgress,\n      f = e[1],\n      m = f.isScrolling,\n      h = f.isAtBottom,\n      p = f.atBottomState,\n      g = f.scrollDirection,\n      v = e[3],\n      y = v.beforeUnshiftWith,\n      b = v.sizes,\n      H = e[4].log,\n      R = u(i(e[2].listState, w(f.lastJumpDueToItemResize), S(function (e, t) {\n    var n = e[1],\n        o = t[0],\n        r = o.items,\n        i = o.totalCount,\n        l = t[1],\n        a = 0;\n\n    if (e[2] === i) {\n      if (n.length > 0 && r.length > 0) {\n        var u = 1 === r.length;\n        if (0 !== r[0].originalIndex || 0 !== n[0].originalIndex) for (var s = function (e) {\n          var t = r[e],\n              o = n.find(function (e) {\n            return e.originalIndex === t.originalIndex;\n          });\n          return o ? t.offset !== o.offset || u ? (a = t.offset - o.offset + t.size - o.size, \"break\") : void 0 : \"continue\";\n        }, c = r.length - 1; c >= 0; c--) {\n          var d = s(c);\n          if (\"continue\" !== d && \"break\" === d) break;\n        }\n      }\n\n      0 !== a && (a += l);\n    }\n\n    return [a, r, i];\n  }, [0, [], 0]), s(function (e) {\n    return 0 !== e[0];\n  }), w(o, g, c, H, h, p), s(function (e) {\n    return !e[3] && 0 !== e[1] && e[2] === Y;\n  }), l(function (e) {\n    var t = e[0][0];\n    return (0, e[4])(\"Upward scrolling compensation\", {\n      amount: t\n    }, N.DEBUG), t;\n  })));\n  return r(i(R, w(a), l(function (e) {\n    return e[1] - e[0];\n  })), a), d(i(C(I(m, !1), a), s(function (e) {\n    return !e[0] && 0 !== e[1];\n  }), l(function (e) {\n    return e[1];\n  }), x(1)), function (e) {\n    e > 0 ? (T(n, {\n      top: -e,\n      behavior: \"auto\"\n    }), T(a, 0)) : (T(a, 0), T(n, {\n      top: -e,\n      behavior: \"auto\"\n    }));\n  }), r(i(y, w(b), l(function (e) {\n    return e[0] * e[1].lastSize;\n  })), R), {\n    deviation: a\n  };\n}, f(U, q, st, Re, j)),\n    ht = t(function (e) {\n  var t = e[0].totalListHeight,\n      n = e[1].didMount,\n      r = e[2].scrollTo,\n      a = o(0);\n  return d(i(n, w(a), s(function (e) {\n    return 0 !== e[1];\n  }), l(function (e) {\n    return {\n      top: e[1]\n    };\n  })), function (e) {\n    y(i(t, s(function (e) {\n      return 0 !== e;\n    })), function () {\n      setTimeout(function () {\n        T(r, e);\n      });\n    });\n  }), {\n    initialScrollTop: a\n  };\n}, f(ft, K, U), {\n  singleton: !0\n}),\n    pt = t(function (e) {\n  var t = e[0].viewportHeight,\n      n = e[1].totalListHeight,\n      r = o(!1);\n  return {\n    alignToBottom: r,\n    paddingTopAddition: I(i(C(r, t, n), s(function (e) {\n      return e[0];\n    }), l(function (e) {\n      return Math.max(0, e[1] - e[2]);\n    }), c()), 0)\n  };\n}, f(U, ft), {\n  singleton: !0\n}),\n    gt = t(function (e) {\n  var t = e[0],\n      o = t.sizes,\n      a = t.totalCount,\n      u = e[1],\n      c = u.scrollTop,\n      d = u.viewportHeight,\n      f = u.headerHeight,\n      m = u.scrollingInProgress,\n      h = e[2].scrollToIndex,\n      g = n();\n  return r(i(g, w(o, d, a, f, c), l(function (e) {\n    var t = e[0],\n        n = t.index,\n        o = t.behavior,\n        r = void 0 === o ? \"auto\" : o,\n        l = t.done,\n        a = e[1],\n        u = e[2],\n        c = e[4],\n        d = e[5],\n        f = e[3] - 1,\n        h = null;\n    n = ye(n, a);\n    var g = we(n = Math.max(0, n, Math.min(f, n)), a.offsetTree) + c;\n    return g < d ? h = {\n      index: n,\n      behavior: r,\n      align: \"start\"\n    } : g + ne(a.sizeTree, n)[1] > d + u && (h = {\n      index: n,\n      behavior: r,\n      align: \"end\"\n    }), h ? l && y(i(m, p(1), s(function (e) {\n      return !1 === e;\n    })), l) : l && l(), h;\n  }), s(function (e) {\n    return null !== e;\n  })), h), {\n    scrollIntoView: g\n  };\n}, f(Re, U, Be, st, j), {\n  singleton: !0\n}),\n    vt = t(function (e) {\n  return M({}, e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]);\n}, f(Pe, ct, K, J, ft, ht, pt, Oe, gt)),\n    It = t(function (e) {\n  var t = e[0],\n      n = t.totalCount,\n      o = t.sizeRanges,\n      a = t.fixedItemSize,\n      u = t.defaultItemSize,\n      s = t.trackItemSizes,\n      c = t.itemSize,\n      d = t.data,\n      f = t.firstItemIndex,\n      m = t.groupIndices,\n      h = t.statefulTotalCount,\n      p = e[1],\n      g = p.initialTopMostItemIndex,\n      v = p.scrolledToInitialItem,\n      I = e[2],\n      C = e[3],\n      S = e[4],\n      T = S.listState,\n      x = S.topItemsIndexes,\n      w = A(S, [\"listState\", \"topItemsIndexes\"]),\n      y = e[5].scrollToIndex,\n      b = e[7].topItemCount,\n      R = e[8].groupCounts,\n      z = e[9],\n      k = e[10];\n  return r(w.rangeChanged, z.scrollSeekRangeChanged), r(i(z.windowViewportRect, l(H(\"visibleHeight\"))), I.viewportHeight), M({\n    totalCount: n,\n    data: d,\n    firstItemIndex: f,\n    sizeRanges: o,\n    initialTopMostItemIndex: g,\n    scrolledToInitialItem: v,\n    topItemsIndexes: x,\n    topItemCount: b,\n    groupCounts: R,\n    fixedItemHeight: a,\n    defaultItemHeight: u\n  }, C, {\n    statefulTotalCount: h,\n    listState: T,\n    scrollToIndex: y,\n    trackItemSizes: s,\n    itemSize: c,\n    groupIndices: m\n  }, w, z, I, k);\n}, f(Re, Qe, U, et, st, Be, mt, dt, nt, vt, j)),\n    Ct = (lt = function () {\n  if (\"undefined\" == typeof document) return \"sticky\";\n  var e = document.createElement(\"div\");\n  return e.style.position = \"-webkit-sticky\", \"-webkit-sticky\" === e.style.position ? \"-webkit-sticky\" : \"sticky\";\n}, ut = !1, function () {\n  return ut || (ut = !0, at = lt()), at;\n});\n\nfunction St(e) {\n  return e;\n}\n\nvar Tt = t(function () {\n  var e = o(function (e) {\n    return \"Item \" + e;\n  }),\n      t = o(function (e) {\n    return \"Group \" + e;\n  }),\n      n = o({}),\n      r = o(St),\n      a = o(\"div\"),\n      u = o(b),\n      s = function (e, t) {\n    return void 0 === t && (t = null), I(i(n, l(function (t) {\n      return t[e];\n    }), c()), t);\n  };\n\n  return {\n    itemContent: e,\n    groupContent: t,\n    components: n,\n    computeItemKey: r,\n    headerFooterTag: a,\n    scrollerRef: u,\n    FooterComponent: s(\"Footer\"),\n    HeaderComponent: s(\"Header\"),\n    TopItemListComponent: s(\"TopItemList\"),\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    GroupComponent: s(\"Group\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    EmptyPlaceholder: s(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\")\n  };\n});\n\nfunction xt(e, t) {\n  var o = n();\n  return d(o, function () {\n    return console.warn(\"react-virtuoso: You are using a deprecated property. \" + t, \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), r(o, e), o;\n}\n\nvar wt = t(function (e) {\n  var t = e[0],\n      o = e[1],\n      u = {\n    item: xt(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    group: xt(o.groupContent, \"Rename the %cgroup%c prop to %cgroupContent.\"),\n    topItems: xt(t.topItemCount, \"Rename the %ctopItems%c prop to %ctopItemCount.\"),\n    itemHeight: xt(t.fixedItemHeight, \"Rename the %citemHeight%c prop to %cfixedItemHeight.\"),\n    scrollingStateChange: xt(t.isScrolling, \"Rename the %cscrollingStateChange%c prop to %cisScrolling.\"),\n    adjustForPrependedItems: n(),\n    maxHeightCacheSize: n(),\n    footer: n(),\n    header: n(),\n    HeaderContainer: n(),\n    FooterContainer: n(),\n    ItemContainer: n(),\n    ScrollContainer: n(),\n    GroupContainer: n(),\n    ListContainer: n(),\n    emptyComponent: n(),\n    scrollSeek: n()\n  };\n\n  function s(e, t, n) {\n    r(i(e, w(o.components), l(function (e) {\n      var o,\n          r = e[0],\n          i = e[1];\n      return console.warn(\"react-virtuoso: \" + n + \" property is deprecated. Pass components.\" + t + \" instead.\"), M({}, i, ((o = {})[t] = r, o));\n    })), o.components);\n  }\n\n  return d(u.adjustForPrependedItems, function () {\n    console.warn(\"react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.\", \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), d(u.maxHeightCacheSize, function () {\n    console.warn(\"react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.\");\n  }), d(u.HeaderContainer, function () {\n    console.warn(\"react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.\");\n  }), d(u.FooterContainer, function () {\n    console.warn(\"react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.\");\n  }), d(u.scrollSeek, function (e) {\n    var n = e.placeholder,\n        r = A(e, [\"placeholder\"]);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), T(o.components, M({}, a(o.components), {\n      ScrollSeekPlaceholder: n\n    })), T(t.scrollSeekConfiguration, r);\n  }), s(u.footer, \"Footer\", \"footer\"), s(u.header, \"Header\", \"header\"), s(u.ItemContainer, \"Item\", \"ItemContainer\"), s(u.ListContainer, \"List\", \"ListContainer\"), s(u.ScrollContainer, \"Scroller\", \"ScrollContainer\"), s(u.emptyComponent, \"EmptyPlaceholder\", \"emptyComponent\"), s(u.GroupContainer, \"Group\", \"GroupContainer\"), M({}, t, o, u);\n}, f(It, Tt)),\n    yt = function (e) {\n  return O(\"div\", {\n    style: {\n      height: e.height\n    }\n  });\n},\n    bt = {\n  position: Ct(),\n  zIndex: 1,\n  overflowAnchor: \"none\"\n},\n    Ht = P(function (e) {\n  var t = e.showTopList,\n      n = void 0 !== t && t,\n      o = Ft(\"listState\"),\n      r = Ft(\"deviation\"),\n      i = Dt(\"sizeRanges\"),\n      l = Ft(\"useWindowScroll\"),\n      a = Ft(\"customScrollParent\"),\n      u = Dt(\"windowScrollContainerState\"),\n      s = Dt(\"scrollContainerState\"),\n      c = a || l ? u : s,\n      d = Ft(\"itemContent\"),\n      f = Ft(\"groupContent\"),\n      m = Ft(\"trackItemSizes\"),\n      h = Ft(\"itemSize\"),\n      p = Ft(\"log\"),\n      g = Je(i, h, m, n ? b : c, p, a),\n      v = Ft(\"EmptyPlaceholder\"),\n      I = Ft(\"ScrollSeekPlaceholder\") || yt,\n      C = Ft(\"ListComponent\"),\n      S = Ft(\"ItemComponent\"),\n      T = Ft(\"GroupComponent\"),\n      x = Ft(\"computeItemKey\"),\n      w = Ft(\"isSeeking\"),\n      y = Ft(\"groupIndices\").length > 0,\n      H = Ft(\"paddingTopAddition\"),\n      R = Ft(\"firstItemIndex\"),\n      z = Ft(\"statefulTotalCount\"),\n      k = n ? {} : {\n    boxSizing: \"border-box\",\n    paddingTop: o.offsetTop + H,\n    paddingBottom: o.offsetBottom,\n    marginTop: r\n  };\n  return !n && 0 === z && v ? O(v) : O(C, {\n    ref: g,\n    style: k,\n    \"data-test-id\": n ? \"virtuoso-top-item-list\" : \"virtuoso-item-list\"\n  }, (n ? o.topItems : o.items).map(function (e) {\n    var t = e.originalIndex,\n        n = x(t + R, e.data);\n    return w ? O(I, M({\n      key: n,\n      index: e.index,\n      height: e.size,\n      type: e.type || \"item\"\n    }, \"group\" === e.type ? {} : {\n      groupIndex: e.groupIndex\n    })) : \"group\" === e.type ? O(T, {\n      key: n,\n      \"data-index\": t,\n      \"data-known-size\": e.size,\n      \"data-item-index\": e.index,\n      style: bt\n    }, f(e.index)) : O(S, {\n      key: n,\n      \"data-index\": t,\n      \"data-known-size\": e.size,\n      \"data-item-index\": e.index,\n      \"data-item-group-index\": e.groupIndex,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }, y ? d(e.index, e.groupIndex, e.data) : d(e.index, e.data));\n  }));\n}),\n    Rt = {\n  height: \"100%\",\n  outline: \"none\",\n  overflowY: \"auto\",\n  position: \"relative\",\n  WebkitOverflowScrolling: \"touch\"\n},\n    zt = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n},\n    kt = {\n  width: \"100%\",\n  position: Ct(),\n  top: 0\n},\n    Bt = P(function () {\n  var e = Ft(\"HeaderComponent\"),\n      t = Dt(\"headerHeight\"),\n      n = Ft(\"headerFooterTag\"),\n      o = Ye(function (e) {\n    return t(ve(e, \"height\"));\n  });\n  return e ? O(n, {\n    ref: o\n  }, O(e)) : null;\n}),\n    Et = P(function () {\n  var e = Ft(\"FooterComponent\"),\n      t = Dt(\"footerHeight\"),\n      n = Ft(\"headerFooterTag\"),\n      o = Ye(function (e) {\n    return t(ve(e, \"height\"));\n  });\n  return e ? O(n, {\n    ref: o\n  }, O(e)) : null;\n});\n\nfunction Lt(e) {\n  var t = e.usePublisher,\n      n = e.useEmitter,\n      o = e.useEmitterValue;\n  return P(function (e) {\n    var r = e.style,\n        i = e.children,\n        l = A(e, [\"style\", \"children\"]),\n        a = t(\"scrollContainerState\"),\n        u = o(\"ScrollerComponent\"),\n        s = $e(a, t(\"smoothScrollTargetReached\"), u, o(\"scrollerRef\")),\n        c = s.scrollerRef,\n        d = s.scrollByCallback;\n    return n(\"scrollTo\", s.scrollToCallback), n(\"scrollBy\", d), O(u, M({\n      ref: c,\n      style: M({}, Rt, r),\n      \"data-test-id\": \"virtuoso-scroller\",\n      \"data-virtuoso-scroller\": \"true\",\n      tabIndex: 0\n    }, l), i);\n  });\n}\n\nfunction Pt(e) {\n  var t = e.usePublisher,\n      n = e.useEmitter,\n      o = e.useEmitterValue;\n  return P(function (e) {\n    var r = e.style,\n        i = e.children,\n        l = A(e, [\"style\", \"children\"]),\n        a = t(\"windowScrollContainerState\"),\n        u = o(\"ScrollerComponent\"),\n        s = t(\"smoothScrollTargetReached\"),\n        c = o(\"totalListHeight\"),\n        d = o(\"deviation\"),\n        f = o(\"customScrollParent\"),\n        m = $e(a, s, u, b, f),\n        h = m.scrollerRef,\n        p = m.scrollByCallback,\n        g = m.scrollToCallback;\n    return qe(function () {\n      return h.current = f || window, function () {\n        h.current = null;\n      };\n    }, [h, f]), n(\"windowScrollTo\", g), n(\"scrollBy\", p), O(u, M({\n      style: M({\n        position: \"relative\"\n      }, r, 0 !== c ? {\n        height: c + d\n      } : {}),\n      \"data-virtuoso-scroller\": \"true\"\n    }, l), i);\n  });\n}\n\nvar Ot = function (e) {\n  var t = e.children,\n      n = Dt(\"viewportHeight\"),\n      o = Ye(z(n, function (e) {\n    return ve(e, \"height\");\n  }));\n  return O(\"div\", {\n    style: zt,\n    ref: o,\n    \"data-viewport-type\": \"element\"\n  }, t);\n},\n    Mt = function (e) {\n  var t = e.children,\n      n = Ze(Dt(\"windowViewportRect\"), Ft(\"customScrollParent\"));\n  return O(\"div\", {\n    ref: n,\n    style: zt,\n    \"data-viewport-type\": \"window\"\n  }, t);\n},\n    At = function (e) {\n  var t = e.children,\n      n = Ft(\"TopItemListComponent\"),\n      o = Ft(\"headerHeight\"),\n      r = M({}, kt, {\n    marginTop: o + \"px\"\n  });\n  return O(n || \"div\", {\n    style: r\n  }, t);\n},\n    Vt = e(wt, {\n  required: {},\n  optional: {\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    groupContent: \"groupContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    headerFooterTag: \"headerFooterTag\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    item: \"item\",\n    group: \"group\",\n    topItems: \"topItems\",\n    itemHeight: \"itemHeight\",\n    scrollingStateChange: \"scrollingStateChange\",\n    maxHeightCacheSize: \"maxHeightCacheSize\",\n    footer: \"footer\",\n    header: \"header\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    GroupContainer: \"GroupContainer\",\n    emptyComponent: \"emptyComponent\",\n    HeaderContainer: \"HeaderContainer\",\n    FooterContainer: \"FooterContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    adjustForPrependedItems: \"adjustForPrependedItems\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, P(function (e) {\n  var t = Ft(\"useWindowScroll\"),\n      n = Ft(\"topItemsIndexes\").length > 0,\n      o = Ft(\"customScrollParent\"),\n      r = o || t ? Mt : Ot;\n  return O(o || t ? Ut : Nt, M({}, e), O(r, null, O(Bt, null), O(Ht, null), O(Et, null)), n && O(At, null, O(Ht, {\n    showTopList: !0\n  })));\n})),\n    Wt = Vt.Component,\n    Dt = Vt.usePublisher,\n    Ft = Vt.useEmitterValue,\n    Gt = Vt.useEmitter,\n    Nt = Lt({\n  usePublisher: Dt,\n  useEmitterValue: Ft,\n  useEmitter: Gt\n}),\n    Ut = Pt({\n  usePublisher: Dt,\n  useEmitterValue: Ft,\n  useEmitter: Gt\n}),\n    _t = t(function () {\n  var e = o(function (e) {\n    return \"Item \" + e;\n  }),\n      t = o({}),\n      n = o(\"virtuoso-grid-item\"),\n      r = o(\"virtuoso-grid-list\"),\n      a = o(St),\n      u = o(b),\n      s = function (e, n) {\n    return void 0 === n && (n = null), I(i(t, l(function (t) {\n      return t[e];\n    }), c()), n);\n  };\n\n  return {\n    itemContent: e,\n    components: t,\n    computeItemKey: a,\n    itemClassName: n,\n    listClassName: r,\n    scrollerRef: u,\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\", \"div\")\n  };\n}),\n    jt = t(function (e) {\n  var t = e[0],\n      o = e[1],\n      u = {\n    item: xt(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    ItemContainer: n(),\n    ScrollContainer: n(),\n    ListContainer: n(),\n    emptyComponent: n(),\n    scrollSeek: n()\n  };\n\n  function s(e, t, n) {\n    r(i(e, w(o.components), l(function (e) {\n      var o,\n          r = e[0],\n          i = e[1];\n      return console.warn(\"react-virtuoso: \" + n + \" property is deprecated. Pass components.\" + t + \" instead.\"), M({}, i, ((o = {})[t] = r, o));\n    })), o.components);\n  }\n\n  return d(u.scrollSeek, function (e) {\n    var n = e.placeholder,\n        r = A(e, [\"placeholder\"]);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), T(o.components, M({}, a(o.components), {\n      ScrollSeekPlaceholder: n\n    })), T(t.scrollSeekConfiguration, r);\n  }), s(u.ItemContainer, \"Item\", \"ItemContainer\"), s(u.ListContainer, \"List\", \"ListContainer\"), s(u.ScrollContainer, \"Scroller\", \"ScrollContainer\"), M({}, t, o, u);\n}, f(Ue, _t)),\n    Kt = P(function () {\n  var e = Qt(\"gridState\"),\n      t = Qt(\"listClassName\"),\n      n = Qt(\"itemClassName\"),\n      o = Qt(\"itemContent\"),\n      r = Qt(\"computeItemKey\"),\n      i = Qt(\"isSeeking\"),\n      l = $t(\"scrollHeight\"),\n      a = Qt(\"ItemComponent\"),\n      u = Qt(\"ListComponent\"),\n      s = Qt(\"ScrollSeekPlaceholder\"),\n      c = $t(\"itemDimensions\"),\n      d = Ye(function (e) {\n    l(e.parentElement.parentElement.scrollHeight);\n    var t = e.firstChild;\n    t && c(t.getBoundingClientRect());\n  });\n  return O(u, {\n    ref: d,\n    className: t,\n    style: {\n      paddingTop: e.offsetTop,\n      paddingBottom: e.offsetBottom\n    }\n  }, e.items.map(function (t) {\n    var l = r(t.index);\n    return i ? O(s, {\n      key: l,\n      index: t.index,\n      height: e.itemHeight,\n      width: e.itemWidth\n    }) : O(a, {\n      className: n,\n      \"data-index\": t.index,\n      key: l\n    }, o(t.index));\n  }));\n}),\n    Yt = function (e) {\n  var t = e.children,\n      n = $t(\"viewportDimensions\"),\n      o = Ye(function (e) {\n    n(e.getBoundingClientRect());\n  });\n  return O(\"div\", {\n    style: zt,\n    ref: o\n  }, t);\n},\n    Zt = function (e) {\n  var t = e.children,\n      n = Ze($t(\"windowViewportRect\"), Qt(\"customScrollParent\"));\n  return O(\"div\", {\n    ref: n,\n    style: zt\n  }, t);\n},\n    qt = e(jt, {\n  optional: {\n    totalCount: \"totalCount\",\n    overscan: \"overscan\",\n    itemContent: \"itemContent\",\n    components: \"components\",\n    computeItemKey: \"computeItemKey\",\n    initialItemCount: \"initialItemCount\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    listClassName: \"listClassName\",\n    itemClassName: \"itemClassName\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    item: \"item\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    scrollToIndex: \"scrollToIndex\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\"\n  }\n}, P(function (e) {\n  var t = M({}, e),\n      n = Qt(\"useWindowScroll\"),\n      o = Qt(\"customScrollParent\"),\n      r = o || n ? Zt : Yt;\n  return O(o || n ? tn : en, M({}, t), O(r, null, O(Kt, null)));\n})),\n    Jt = qt.Component,\n    $t = qt.usePublisher,\n    Qt = qt.useEmitterValue,\n    Xt = qt.useEmitter,\n    en = Lt({\n  usePublisher: $t,\n  useEmitterValue: Qt,\n  useEmitter: Xt\n}),\n    tn = Pt({\n  usePublisher: $t,\n  useEmitterValue: Qt,\n  useEmitter: Xt\n}),\n    nn = t(function () {\n  var e = o(function (e) {\n    return O(\"td\", null, \"Item $\", e);\n  }),\n      t = o(null),\n      n = o({}),\n      r = o(St),\n      a = o(b),\n      u = function (e, t) {\n    return void 0 === t && (t = null), I(i(n, l(function (t) {\n      return t[e];\n    }), c()), t);\n  };\n\n  return {\n    itemContent: e,\n    fixedHeaderContent: t,\n    components: n,\n    computeItemKey: r,\n    scrollerRef: a,\n    TableComponent: u(\"Table\", \"table\"),\n    TableHeadComponent: u(\"TableHead\", \"thead\"),\n    TableBodyComponent: u(\"TableBody\", \"tbody\"),\n    TableRowComponent: u(\"TableRow\", \"tr\"),\n    ScrollerComponent: u(\"Scroller\", \"div\"),\n    EmptyPlaceholder: u(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: u(\"ScrollSeekPlaceholder\")\n  };\n}),\n    on = t(function (e) {\n  return M({}, e[0], e[1]);\n}, f(It, nn)),\n    rn = function (e) {\n  return O(\"tr\", null, O(\"td\", {\n    style: {\n      height: e.height\n    }\n  }));\n},\n    ln = function (e) {\n  return O(\"tr\", null, O(\"td\", {\n    style: {\n      height: e.height,\n      padding: 0,\n      border: 0\n    }\n  }));\n},\n    an = P(function () {\n  var e = mn(\"listState\"),\n      t = mn(\"deviation\"),\n      n = fn(\"sizeRanges\"),\n      o = mn(\"useWindowScroll\"),\n      r = mn(\"customScrollParent\"),\n      i = fn(\"windowScrollContainerState\"),\n      l = fn(\"scrollContainerState\"),\n      a = r || o ? i : l,\n      u = mn(\"itemContent\"),\n      s = mn(\"trackItemSizes\"),\n      c = Je(n, mn(\"itemSize\"), s, a, mn(\"log\"), r),\n      d = mn(\"EmptyPlaceholder\"),\n      f = mn(\"ScrollSeekPlaceholder\") || rn,\n      m = mn(\"TableBodyComponent\"),\n      h = mn(\"TableRowComponent\"),\n      p = mn(\"computeItemKey\"),\n      g = mn(\"isSeeking\"),\n      v = mn(\"paddingTopAddition\"),\n      I = mn(\"firstItemIndex\");\n  if (0 === mn(\"statefulTotalCount\") && d) return O(d);\n  var C = e.offsetTop + v + t,\n      S = e.offsetBottom,\n      T = C > 0 ? O(ln, {\n    height: C,\n    key: \"padding-top\"\n  }) : null,\n      x = S > 0 ? O(ln, {\n    height: S,\n    key: \"padding-bottom\"\n  }) : null,\n      w = e.items.map(function (e) {\n    var t = e.originalIndex,\n        n = p(t + I, e.data);\n    return g ? O(f, {\n      key: n,\n      index: e.index,\n      height: e.size,\n      type: e.type || \"item\"\n    }) : O(h, {\n      key: n,\n      \"data-index\": t,\n      \"data-known-size\": e.size,\n      \"data-item-index\": e.index,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }, u(e.index, e.data));\n  });\n  return O(m, {\n    ref: c,\n    \"data-test-id\": \"virtuoso-item-list\"\n  }, [T].concat(w, [x]));\n}),\n    un = function (e) {\n  var t = e.children,\n      n = fn(\"viewportHeight\"),\n      o = Ye(z(n, function (e) {\n    return ve(e, \"height\");\n  }));\n  return O(\"div\", {\n    style: zt,\n    ref: o,\n    \"data-viewport-type\": \"element\"\n  }, t);\n},\n    sn = function (e) {\n  var t = e.children,\n      n = Ze(fn(\"windowViewportRect\"), mn(\"customScrollParent\"));\n  return O(\"div\", {\n    ref: n,\n    style: zt,\n    \"data-viewport-type\": \"window\"\n  }, t);\n},\n    cn = e(on, {\n  required: {},\n  optional: {\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    fixedHeaderContent: \"fixedHeaderContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, P(function (e) {\n  var t = mn(\"useWindowScroll\"),\n      n = mn(\"customScrollParent\"),\n      o = fn(\"fixedHeaderHeight\"),\n      r = mn(\"fixedHeaderContent\"),\n      i = Ye(z(o, function (e) {\n    return ve(e, \"height\");\n  })),\n      l = n || t ? gn : pn,\n      a = n || t ? sn : un,\n      u = mn(\"TableComponent\"),\n      s = mn(\"TableHeadComponent\"),\n      c = r ? O(s, {\n    key: \"TableHead\",\n    style: {\n      zIndex: 1,\n      position: \"sticky\",\n      top: 0\n    },\n    ref: i\n  }, r()) : null;\n  return O(l, M({}, e), O(a, null, O(u, {\n    style: {\n      borderSpacing: 0\n    }\n  }, [c, O(an, {\n    key: \"TableBody\"\n  })])));\n})),\n    dn = cn.Component,\n    fn = cn.usePublisher,\n    mn = cn.useEmitterValue,\n    hn = cn.useEmitter,\n    pn = Lt({\n  usePublisher: fn,\n  useEmitterValue: mn,\n  useEmitter: hn\n}),\n    gn = Pt({\n  usePublisher: fn,\n  useEmitterValue: mn,\n  useEmitter: hn\n}),\n    vn = Wt,\n    In = Wt,\n    Cn = dn,\n    Sn = Jt;\n\nexport { In as GroupedVirtuoso, N as LogLevel, Cn as TableVirtuoso, vn as Virtuoso, Sn as VirtuosoGrid };","map":{"version":3,"mappings":"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","names":["tupleComparator","prev","current","rangeComparator","next","startIndex","endIndex","LogLevel","domIOSystem","u","scrollContainerState","scrollTop","deviation","smoothScrollTargetReached","statefulScrollTop","viewportHeight","scrollHeight","headerHeight","footerHeight","scrollTo","scrollBy","scrollingInProgress","singleton","CONSOLE_METHOD_MAP","DEBUG","G","INFO","WARN","ERROR","loggerSystem","logLevel","log","label","message","level","globalThis","window","VIRTUOSO_LOG_LEVEL","r","console","propsReadySystem","propsReady","didMount","ready","value","getValue","tup","UP","INITIAL_BOTTOM_STATE","atBottom","notAtBottomBecause","state","offsetBottom","stateFlagsSystem","isAtBottom","isAtTop","atBottomStateChange","atTopStateChange","atBottomThreshold","isScrolling","isScrollingBy","top","atBottomState","atBottomBecause","scrollTopDelta","lastJumpDueToItemResize","jump","changed","setTimeout","scrollDirection","acc","direction","prevScrollTop","scrollVelocity","scrollSeekSystem","isSeeking","rangeChanged","scrollSeekConfiguration","speed","config","range","enter","exit","change","scrollSeekRangeChanged","NIL_NODE","lvl","newAANode","k","v","l","empty","node","newTree","remove","key","last","adjust","clone","deleteLast","findMaxKeyValue","field","Infinity","undefined","insert","split","skew","rebalance","walkWithin","start","end","result","concat","push","walk","args","isSingle","Error","rl","rlvl","rangesWithin","arrayToRanges","index","items","parser","length","i","nextIndex","nextValue","findIndexOfClosestSmallerOrEqual","comparator","Math","floor","match","join","findClosestSmallerOrEqual","correctItemSize","el","dimension","round","getBoundingClientRect","rangeIncludes","refRange","size","indexComparator","itemIndex","offsetComparator","offset","itemOffset","offsetPointParser","point","sizeStateReducer","ranges","groupIndices","sizeTree","offsetTree","newSizeTree","syncStart","groupSize","itemSize","reduce","tree","groupIndex","min","overlappingRanges","some","firstPassDone","shouldInsert","m","rangeStart","rangeEnd","rangeValue","insertRanges","prevIndex","prevSize","prevAOffset","startAIndex","arrayBinarySearch","kv","slice","aOffset","groupOffsetTree","offsetOf","lastIndex","lastOffset","lastSize","originalIndexFromItemIndex","sizes","hasGroups","groupOffset","SIZE_MAP","offsetHeight","offsetWidth","sizeSystem","sizeRanges","totalCount","statefulTotalCount","unshiftWith","firstItemIndex","fixedItemSize","defaultItemSize","data","initial","indexes","idx","trackItemSizes","listRefresh","newSizes","diff","val","e","beforeUnshiftWith","SUPPORTS_SCROLL_TO_OPTIONS","document","documentElement","style","normalizeIndexLocation","location","align","behavior","scrollToIndexSystem","scrollToIndex","topListHeight","unsubscribeNextListRefresh","cleartTimeoutRef","unsubscribeListRefresh","cleanup","clearTimeout","normalLocation","max","retry","listChanged","done","timeoutRef","getOverscan","overscan","main","reverse","getViewportIncrease","sizeRangeSystem","listBoundary","fixedHeaderHeight","increaseViewportBy","visibleRange","listTop","listBottom","stickyHeaderHeight","headerVisible","topViewportAddition","bottomViewportAddition","windowScrollerSystem","windowScrollContainerState","windowViewportRect","windowScrollTo","useWindowScroll","customScrollParent","t","offsetTop","INITIAL_GRID_STATE","bottom","itemHeight","itemWidth","PROBE_GRID_STATE","ceil","hackFloor","buildItems","Array","from","map","_","gridSystem","stateFlags","scrollSeek","initialItemCount","gridState","viewportDimensions","height","width","itemDimensions","startOffset","endOffset","item","viewport","viewportWidth","perRow","gridLayout","endReached","startReached","itemTop","totalListHeight","viewportInfo","visibleWidth","visibleHeight","useSizeWithElRef","callback","enabled","ref","useRef","callbackRef","_el","ResizeObserver","observer","entries","element","target","offsetParent","elRef","observe","unobserve","useSize","useWindowViewportRectRef","calculateInfo","useCallback","rect","customScrollParentRect","deltaTop","innerHeight","pageYOffset","scrollAndResizeEventHandler","useEffect","addEventListener","removeEventListener","useIsomorphicLayoutEffect","useLayoutEffect","useChangedListContentsSizes","scrollContainerStateCallback","children","results","child","dataset","parseInt","knownSize","parseFloat","lastResult","getChangedChildSizes","scrollableElement","parentElement","firstElementChild","useScrollTop","scrollerElement","scrollerRefCallback","scrollerRef","scrollTopTarget","handler","ev","localRef","passive","scrollByCallback","scrollToCallback","isSmooth","abs","initialTopMostItemIndexSystem","scrolledToInitialItem","initialTopMostItemIndex","normalizeFollowOutput","follow","followOutputSystem","followOutput","pendingScrollHandle","scrollToBottom","followOutputBehavior","shouldFollow","behaviorFromFollowOutput","refreshed","cancel","groupCountsToIndicesAndCount","counts","groupCount","groupedListSystem","system","groupCounts","stream","topItemsIndexes","groupIndicesAndCount","streamFromEmitter","pipe","connect","prop","combineLatest","filter","distinctUntilChanged","EMPTY_LIST_STATE","topItems","transposeItems","originalIndex","transposedItems","groupRanges","currentRange","currentGroupIndex","shift","indexOf","type","buildListState","lastItem","func","called","listStateSystem","rangeTopListHeight","itemsRendered","listState","sizesValue","probeItemSet","I","rangeStartIndex","rangeEndIndex","minStartIndex","offsetPointRanges","endValue","rangesWithinOffsets","maxIndex","initialItemCountSystem","count","includedGroupsCount","adjustedCount","topItemCountSystem","topItemCount","statefulStream","totalListHeightSystem","totalListHeightChanged","upwardScrollFixSystem","deviationOffset","prevItems","newDev","onlyItem","prevItem","find","pItem","amount","initialScrollTopSystem","initialScrollTop","alignToBottomSystem","alignToBottom","paddingTopAddition","scrollIntoViewSystem","scrollIntoView","o","featureGroup1System","listSystem","domIO","flags","featureGroup1","fixedItemHeight","defaultItemHeight","positionStickyCssValue","createElement","position","identity","listComponentPropsSystem","itemContent","groupContent","components","computeItemKey","headerFooterTag","noop","distinctProp","propName","defaultValue","statefulStreamFromEmitter","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","addDeprecatedAlias","alias","subscribe","warn","combinedSystem","propsSystem","deprecatedProps","group","scrollingStateChange","adjustForPrependedItems","maxHeightCacheSize","footer","header","HeaderContainer","FooterContainer","ItemContainer","ScrollContainer","GroupContainer","ListContainer","emptyComponent","deprecateComponentProp","componentName","withLatestFrom","comp","placeholder","publish","M","DefaultScrollSeekPlaceholder","React","GROUP_STYLE","zIndex","overflowAnchor","Items","showTopList","useEmitterValue","usePublisher","windowScrollContainerStateCallback","_scrollContainerStateCallback","containerStyle","boxSizing","paddingTop","paddingBottom","marginTop","data-test-id","data-index","data-known-size","data-item-index","data-item-group-index","scrollerStyle","outline","overflowY","WebkitOverflowScrolling","viewportStyle","topItemListStyle","Header","Footer","buildScroller","useEmitter","props","s","data-virtuoso-scroller","tabIndex","buildWindowScroller","Viewport","viewportRef","compose","WindowViewport","TopItemListContainer","TopItemList","systemToComponent","required","optional","methods","events","TheViewport","WindowScroller","Scroller","List","Component","gridComponentPropsSystem","itemClassName","listClassName","GridItems","scrollHeightCallback","listRef","firstItem","firstChild","className","Grid","tableComponentPropsSystem","fixedHeaderContent","TableComponent","TableHeadComponent","TableBodyComponent","TableRowComponent","FillerRow","padding","border","paddingTopEl","paddingBottomEl","theadRef","TheScroller","TheTable","TheTHead","theHead","borderSpacing","Table","Virtuoso","GroupedVirtuoso","TableVirtuoso","VirtuosoGrid"],"sources":["/home/sirine/react/client/node_modules/react-virtuoso/src/comparators.tsx","/home/sirine/react/client/node_modules/react-virtuoso/src/loggerSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/domIOSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/propsReadySystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/stateFlagsSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/scrollSeekSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/AATree.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/utils/binaryArraySearch.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/utils/correctItemSize.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/sizeSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/scrollToIndexSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/sizeRangeSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/windowScrollerSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/gridSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/hooks/useSize.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/hooks/useWindowViewportRect.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/hooks/useIsomorphicLayoutEffect.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/hooks/useChangedChildSizes.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/hooks/useScrollTop.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/initialTopMostItemIndexSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/followOutputSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/groupedListSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/listStateSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/utils/simpleMemoize.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/initialItemCountSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/topItemCountSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/totalListHeightSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/upwardScrollFixSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/initialScrollTopSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/alignToBottomSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/scrollIntoViewSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/listSystem.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/utils/positionStickyCssValue.ts","/home/sirine/react/client/node_modules/react-virtuoso/src/List.tsx","/home/sirine/react/client/node_modules/react-virtuoso/src/Grid.tsx","/home/sirine/react/client/node_modules/react-virtuoso/src/Table.tsx","/home/sirine/react/client/node_modules/react-virtuoso/src/components.tsx"],"sourcesContent":["import { ListRange } from './interfaces'\n\nexport function tupleComparator(prev: [any, any] | undefined, current: [any, any]) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1])\n}\n\nexport function rangeComparator(prev: ListRange | undefined, next: ListRange) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex)\n}\n","import * as u from '@virtuoso.dev/urx'\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace globalThis {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace window {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\nexport enum LogLevel {\n  DEBUG,\n  INFO,\n  WARN,\n  ERROR,\n}\nexport interface LogMessage {\n  level: LogLevel\n  message: any\n  label: string\n}\n\nexport type Log = (label: string, message: any, level?: LogLevel) => void\n\nconst CONSOLE_METHOD_MAP = {\n  [LogLevel.DEBUG]: 'debug',\n  [LogLevel.INFO]: 'log',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error',\n} as const\n\nconst getGlobalThis = () => (typeof globalThis === 'undefined' ? window : globalThis)\n\nexport const loggerSystem = u.system(\n  () => {\n    const logLevel = u.statefulStream<LogLevel>(LogLevel.ERROR)\n    const log = u.statefulStream<Log>((label: string, message: any, level: LogLevel = LogLevel.INFO) => {\n      const currentLevel = getGlobalThis()['VIRTUOSO_LOG_LEVEL'] ?? u.getValue(logLevel)\n      if (level >= currentLevel) {\n        // eslint-disable-next-line no-console\n        console[CONSOLE_METHOD_MAP[level]](\n          '%creact-virtuoso: %c%s %o',\n          'color: #0253b3; font-weight: bold',\n          'color: initial',\n          label,\n          message\n        )\n      }\n    })\n\n    return {\n      log,\n      logLevel,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\n\nexport const domIOSystem = u.system(\n  () => {\n    const scrollContainerState = u.stream<[number, number]>()\n    const scrollTop = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const smoothScrollTargetReached = u.stream<true>()\n    const statefulScrollTop = u.statefulStream(0)\n    const viewportHeight = u.stream<number>()\n    const scrollHeight = u.stream<number>()\n    const headerHeight = u.statefulStream(0)\n    const footerHeight = u.statefulStream(0)\n    const scrollTo = u.stream<ScrollToOptions>()\n    const scrollBy = u.stream<ScrollToOptions>()\n    const scrollingInProgress = u.statefulStream(false)\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(([scrollTop]) => scrollTop)\n      ),\n      scrollTop\n    )\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(([, scrollHeight]) => scrollHeight)\n      ),\n      scrollHeight\n    )\n\n    u.connect(scrollTop, statefulScrollTop)\n\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n\n      // signals\n      scrollTo,\n      scrollBy,\n\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { getValue, tup } from '@virtuoso.dev/urx'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport const propsReadySystem = u.system(\n  ([{ log }]) => {\n    const propsReady = u.statefulStream(false)\n\n    const didMount = u.streamFromEmitter(\n      u.pipe(\n        propsReady,\n        u.filter((ready) => ready),\n        u.distinctUntilChanged()\n      )\n    )\n    u.subscribe(propsReady, (value) => {\n      value && getValue(log)('props updated', {}, LogLevel.DEBUG)\n    })\n\n    return { propsReady, didMount }\n  },\n  tup(loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\n\nexport const UP = 'up' as const\nexport const DOWN = 'down' as const\nexport const NONE = 'none' as const\nexport type ScrollDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport interface ListBottomInfo {\n  bottom: number\n  offsetBottom: number\n}\n\nexport interface AtBottomParams {\n  offsetBottom: number\n  scrollTop: number\n  viewportHeight: number\n  scrollHeight: number\n}\n\nexport type NotAtBottomReason =\n  | 'SIZE_INCREASED'\n  | 'NOT_SHOWING_LAST_ITEM'\n  | 'VIEWPORT_HEIGHT_DECREASING'\n  | 'SCROLLING_UPWARDS'\n  | 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n\nexport type AtBottomReason = 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n\nexport type AtBottomState =\n  | {\n      atBottom: false\n      notAtBottomBecause: NotAtBottomReason\n      state: AtBottomParams\n    }\n  | {\n      atBottom: true\n      state: AtBottomParams\n      atBottomBecause: AtBottomReason\n      scrollTopDelta: number\n    }\n\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: 'NOT_SHOWING_LAST_ITEM',\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0,\n  },\n} as AtBottomState\n\nexport const stateFlagsSystem = u.system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = u.statefulStream(false)\n  const isAtTop = u.statefulStream(true)\n  const atBottomStateChange = u.stream<boolean>()\n  const atTopStateChange = u.stream<boolean>()\n  const atBottomThreshold = u.statefulStream(4)\n\n  // skip 1 to avoid an initial on/off flick\n  const isScrolling = u.streamFromEmitter(\n    u.pipe(\n      u.merge(u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(true)), u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(false), u.debounceTime(100))),\n      u.distinctUntilChanged()\n    )\n  )\n\n  const isScrollingBy = u.statefulStreamFromEmitter(\n    u.pipe(u.merge(u.pipe(scrollBy, u.mapTo(true)), u.pipe(scrollBy, u.mapTo(false), u.debounceTime(200))), u.distinctUntilChanged()),\n    false\n  )\n\n  // u.subscribe(isScrollingBy, (isScrollingBy) => console.log({ isScrollingBy }))\n\n  u.connect(\n    u.pipe(\n      u.duc(scrollTop),\n      u.map((top) => top === 0),\n      u.distinctUntilChanged()\n    ),\n    isAtTop\n  )\n\n  u.connect(isAtTop, atTopStateChange)\n\n  const atBottomState = u.streamFromEmitter(\n    u.pipe(\n      u.combineLatest(scrollContainerState, u.duc(viewportHeight), u.duc(headerHeight), u.duc(footerHeight), u.duc(atBottomThreshold)),\n      u.scan((current, [[scrollTop, scrollHeight], viewportHeight, _headerHeight, _footerHeight, atBottomThreshold]) => {\n        const isAtBottom = scrollTop + viewportHeight - scrollHeight > -atBottomThreshold\n        const state = {\n          viewportHeight,\n          scrollTop,\n          scrollHeight,\n        }\n\n        if (isAtBottom) {\n          let atBottomBecause: 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n          let scrollTopDelta: number\n          if (scrollTop > current.state.scrollTop) {\n            atBottomBecause = 'SCROLLED_DOWN'\n            scrollTopDelta = current.state.scrollTop - scrollTop\n          } else {\n            atBottomBecause = 'SIZE_DECREASED'\n            scrollTopDelta = current.state.scrollTop - scrollTop || (current as { scrollTopDelta: number }).scrollTopDelta\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta,\n          } as AtBottomState\n        }\n\n        let notAtBottomBecause: NotAtBottomReason\n\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = 'SIZE_INCREASED'\n        } else if (viewportHeight < current.state.viewportHeight) {\n          notAtBottomBecause = 'VIEWPORT_HEIGHT_DECREASING'\n        } else if (scrollTop < current.state.scrollTop) {\n          notAtBottomBecause = 'SCROLLING_UPWARDS'\n        } else {\n          notAtBottomBecause = 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n        }\n\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state,\n        } as AtBottomState\n      }, INITIAL_BOTTOM_STATE),\n      u.distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom\n      })\n    )\n  )\n\n  const lastJumpDueToItemResize = u.statefulStreamFromEmitter(\n    u.pipe(\n      scrollContainerState,\n      u.scan(\n        (current, [scrollTop, scrollHeight]) => {\n          if (current.scrollHeight !== scrollHeight) {\n            if (current.scrollTop !== scrollTop) {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: current.scrollTop - scrollTop,\n                changed: true,\n              }\n            } else {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: 0,\n                changed: true,\n              }\n            }\n          } else {\n            return {\n              scrollTop,\n              scrollHeight,\n              jump: 0,\n              changed: false,\n            }\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      u.filter((value) => value.changed),\n      u.map((value) => value.jump)\n    ),\n    0\n  )\n\n  u.connect(\n    u.pipe(\n      atBottomState,\n      u.map((state) => state.atBottom)\n    ),\n    isAtBottom\n  )\n\n  u.subscribe(isAtBottom, (value) => {\n    setTimeout(() => u.publish(atBottomStateChange, value))\n  })\n\n  const scrollDirection = u.statefulStream<ScrollDirection>(DOWN)\n\n  u.subscribe(isAtBottom, (value) => {\n    setTimeout(() => {\n      u.publish(atBottomStateChange, value)\n    })\n  })\n\n  u.connect(\n    u.pipe(\n      scrollContainerState,\n      u.map(([scrollTop]) => scrollTop),\n      u.distinctUntilChanged(),\n      u.scan(\n        (acc, scrollTop) => {\n          // if things change while compensating for items, ignore,\n          // but store the new scrollTop\n          if (u.getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop }\n          }\n\n          return { direction: scrollTop < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop }\n        },\n        { direction: DOWN, prevScrollTop: 0 } as { direction: ScrollDirection; prevScrollTop: number }\n      ),\n      u.map((value) => value.direction)\n    ),\n    scrollDirection\n  )\n\n  u.connect(u.pipe(scrollContainerState, u.throttleTime(50), u.mapTo(NONE)), scrollDirection)\n\n  u.connect(isAtBottom, atBottomStateChange)\n\n  const scrollVelocity = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      isScrolling,\n      u.filter((value) => !value),\n      u.mapTo(0)\n    ),\n    scrollVelocity\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTop,\n      u.throttleTime(100),\n      u.withLatestFrom(isScrolling),\n      u.filter(([_, isScrolling]) => !!isScrolling),\n      u.scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      u.map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  )\n\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { ListRange } from './interfaces'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { ScrollSeekConfiguration } from './interfaces'\n\nexport const scrollSeekSystem = u.system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = u.statefulStream(false)\n    const rangeChanged = u.stream<ListRange>()\n    const scrollSeekConfiguration = u.statefulStream<ScrollSeekConfiguration | undefined | false>(false)\n\n    u.connect(\n      u.pipe(\n        scrollVelocity,\n        u.withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        u.filter(([_, config]) => !!config),\n        u.map(([speed, config, isSeeking, range]) => {\n          const { exit, enter } = config as ScrollSeekConfiguration\n          if (isSeeking) {\n            if (exit(speed, range)) {\n              return false\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true\n            }\n          }\n          return isSeeking\n        }),\n        u.distinctUntilChanged()\n      ),\n      isSeeking\n    )\n\n    u.subscribe(\n      u.pipe(u.combineLatest(isSeeking, scrollVelocity, rangeChanged), u.withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking, velocity, range], config]) => isSeeking && config && config.change && config.change(velocity, range)\n    )\n\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged }\n  },\n  u.tup(stateFlagsSystem),\n  { singleton: true }\n)\n","interface NilNode {\n  lvl: 0\n}\n\nconst NIL_NODE: NilNode = { lvl: 0 }\n\ninterface NodeData<T> {\n  k: number\n  v: T\n}\n\ninterface NonNilAANode<T> {\n  k: number\n  v: T\n  lvl: number\n  l: NonNilAANode<T> | NilNode\n  r: NonNilAANode<T> | NilNode\n}\n\nexport interface Range<T> {\n  start: number\n  end: number\n  value: T\n}\n\nexport type AANode<T> = NilNode | NonNilAANode<T>\n\nfunction newAANode<T>(k: number, v: T, lvl: number, l: AANode<T> = NIL_NODE, r: AANode<T> = NIL_NODE): NonNilAANode<T> {\n  return { k, v, lvl, l, r }\n}\n\nexport function empty(node: AANode<any>): node is NilNode {\n  return node === NIL_NODE\n}\n\nexport function newTree<T>(): AANode<T> {\n  return NIL_NODE\n}\n\nexport function remove<T>(node: AANode<T>, key: number): AANode<T> {\n  if (empty(node)) return NIL_NODE\n\n  const { k, l, r } = node\n\n  if (key === k) {\n    if (empty(l)) {\n      return r\n    } else if (empty(r)) {\n      return l\n    } else {\n      const [lastKey, lastValue] = last(l)\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }))\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }))\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }))\n  }\n}\n\nexport function find<T>(node: AANode<T>, key: number): T | undefined {\n  if (empty(node)) {\n    return\n  }\n\n  if (key === node.k) {\n    return node.v\n  } else if (key < node.k) {\n    return find(node.l, key)\n  } else {\n    return find(node.r, key)\n  }\n}\n\nexport function findMaxKeyValue<T>(node: AANode<T>, value: number, field: 'k' | 'v' = 'k'): [number, T | undefined] {\n  if (empty(node)) {\n    return [-Infinity, undefined]\n  }\n\n  if (node[field] === value) {\n    return [node.k, node.v]\n  }\n\n  if (node[field] < value) {\n    const r = findMaxKeyValue(node.r, value, field)\n    if (r[0] === -Infinity) {\n      return [node.k, node.v]\n    } else {\n      return r\n    }\n  }\n\n  return findMaxKeyValue(node.l, value, field)\n}\n\nexport function insert<T>(node: AANode<T>, k: number, v: T): NonNilAANode<T> {\n  if (empty(node)) {\n    return newAANode(k, v, 1)\n  }\n  if (k === node.k) {\n    return clone(node, { k, v })\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }))\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }))\n  }\n}\n\nexport function walkWithin<T>(node: AANode<T>, start: number, end: number): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  const { k, v, l, r } = node\n  let result: NodeData<T>[] = []\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end))\n  }\n\n  if (k >= start && k <= end) {\n    result.push({ k, v })\n  }\n\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end))\n  }\n\n  return result\n}\n\nexport function walk<T>(node: AANode<T>): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)]\n}\n\nfunction last<T>(node: NonNilAANode<T>): [number, T] {\n  return empty(node.r) ? [node.k, node.v] : last(node.r)\n}\n\nfunction deleteLast<T>(node: NonNilAANode<T>): AANode<T> {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }))\n}\n\nfunction clone<T>(node: NonNilAANode<T>, args: Partial<NonNilAANode<T>>): NonNilAANode<T> {\n  return newAANode(\n    args.k !== undefined ? args.k : node.k,\n    args.v !== undefined ? args.v : node.v,\n    args.lvl !== undefined ? args.lvl : node.lvl,\n    args.l !== undefined ? args.l : node.l,\n    args.r !== undefined ? args.r : node.r\n  )\n}\n\nfunction isSingle(node: AANode<any>) {\n  return empty(node) || node.lvl > node.r.lvl\n}\n\nfunction rebalance<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  return split(skew(node))\n}\n\nfunction adjust<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l, r, lvl } = node\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1,\n          }),\n          lvl: lvl,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl\n\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1,\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  }\n}\n\nexport function keys(node: AANode<any>): number[] {\n  if (empty(node)) {\n    return []\n  }\n  return [...keys(node.l), node.k, ...keys(node.r)]\n}\n\nexport function ranges<T>(node: AANode<T>): Range<T>[] {\n  return toRanges(walk(node))\n}\n\nexport function rangesWithin<T>(node: AANode<T>, startIndex: number, endIndex: number): Range<T>[] {\n  if (empty(node)) {\n    return []\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0]\n  return toRanges(walkWithin(node, adjustedStart, endIndex))\n}\n\nexport function arrayToRanges<T, V>(\n  items: T[],\n  parser: (item: T) => { index: number; value: V }\n): Array<{ start: number; end: number; value: V }> {\n  const length = items.length\n  if (length === 0) {\n    return []\n  }\n\n  let { index: start, value } = parser(items[0])\n\n  const result = []\n\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i])\n    result.push({ start, end: nextIndex - 1, value })\n\n    start = nextIndex\n    value = nextValue\n  }\n\n  result.push({ start, end: Infinity, value })\n  return result\n}\n\nfunction toRanges<T>(nodes: NodeData<T>[]): Range<T>[] {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }))\n}\n\nfunction split<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { r, lvl } = node\n\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node\n}\n\nfunction skew<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l } = node\n\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node\n}\n","export type Comparator<T> = {\n  (item: T, value: number): -1 | 0 | 1\n}\n\nexport function findIndexOfClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>, start = 0): number {\n  let end = items.length - 1\n\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2)\n    const item = items[index]\n    const match = comparator(item, value)\n    if (match === 0) {\n      return index\n    }\n\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1\n      }\n      end = index - 1\n    } else {\n      if (end === start) {\n        return index\n      }\n      start = index + 1\n    }\n  }\n\n  throw new Error(`Failed binary finding record in array - ${items.join(',')}, searched for ${value}`)\n}\n\nexport function findClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>): T {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)]\n}\n\nexport function findRange<T>(items: T[], startValue: number, endValue: number, comparator: Comparator<T>): T[] {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator)\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex)\n  return items.slice(startIndex, endIndex + 1)\n}\n","export function correctItemSize(el: HTMLElement, dimension: 'height' | 'width') {\n  return Math.round(el.getBoundingClientRect()[dimension])\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { arrayToRanges, AANode, empty, findMaxKeyValue, insert, newTree, Range, rangesWithin, remove, walk } from './AATree'\nimport * as arrayBinarySearch from './utils/binaryArraySearch'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { loggerSystem, Log, LogLevel } from './loggerSystem'\n\nexport interface SizeRange {\n  startIndex: number\n  endIndex: number\n  size: number\n}\n\nexport type Data = readonly unknown[] | undefined\n\nfunction rangeIncludes(refRange: SizeRange) {\n  const { size, startIndex, endIndex } = refRange\n  return (range: Range<number>) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size\n  }\n}\n\nexport function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[]) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity\n\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range\n    syncStart = Math.min(syncStart, startIndex)\n\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size)\n      continue\n    }\n\n    // extend the range in both directions, so that we can get adjacent neighbours.\n    // if the previous / next ones have the same value as the one we are about to insert,\n    // we 'merge' them.\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1)\n\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue\n    }\n\n    let firstPassDone = false\n    let shouldInsert = false\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      // previous range\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size\n        firstPassDone = true\n      } else {\n        // remove the range if it starts within the new range OR if\n        // it has the same value as it, in order to perform a merge\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart)\n        }\n      }\n\n      // next range\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue)\n        }\n      }\n    }\n\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size)\n    }\n  }\n  return [sizeTree, syncStart] as const\n}\n\nexport interface OffsetPoint {\n  offset: number\n  size: number\n  index: number\n}\n\nexport interface SizeState {\n  sizeTree: AANode<number>\n  offsetTree: Array<OffsetPoint>\n  groupOffsetTree: AANode<number>\n  lastIndex: number\n  lastOffset: number\n  lastSize: number\n  groupIndices: number[]\n}\n\nexport function initialSizeState(): SizeState {\n  return {\n    offsetTree: [],\n    sizeTree: newTree<number>(),\n    groupOffsetTree: newTree<number>(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: [],\n  }\n}\n\nexport function indexComparator({ index: itemIndex }: OffsetPoint, index: number) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1\n}\n\nexport function offsetComparator({ offset: itemOffset }: OffsetPoint, offset: number) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1\n}\n\nfunction offsetPointParser(point: OffsetPoint) {\n  return { index: point.index, value: point }\n}\n\nexport function rangesWithinOffsets(\n  tree: Array<OffsetPoint>,\n  startOffset: number,\n  endOffset: number,\n  minStartIndex = 0\n): Array<{\n  start: number\n  end: number\n  value: {\n    size: number\n    offset: number\n    index: number\n  }\n}> {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, arrayBinarySearch.findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset)\n  }\n\n  return arrayToRanges(arrayBinarySearch.findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser)\n}\n\nexport function sizeStateReducer(state: SizeState, [ranges, groupIndices, log]: [SizeRange[], number[], Log]) {\n  if (ranges.length > 0) {\n    log('received item sizes', ranges, LogLevel.DEBUG)\n  }\n  const sizeTree = state.sizeTree\n  let offsetTree = state.offsetTree\n  let newSizeTree: AANode<number> = sizeTree\n  let syncStart = 0\n\n  // We receive probe item results from a group probe,\n  // which should always pass an item and a group\n  // the results contain two ranges, which we consider to mean that groups and items have different size\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size\n    const itemSize = ranges[1].size\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize)\n    }, newSizeTree)\n  } else {\n    ;[newSizeTree, syncStart] = insertRanges(newSizeTree, ranges)\n  }\n\n  if (newSizeTree === sizeTree) {\n    return state\n  }\n\n  let prevIndex = 0\n  let prevSize = 0\n\n  let prevAOffset = 0\n  let startAIndex = 0\n\n  if (syncStart !== 0) {\n    startAIndex = arrayBinarySearch.findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator)\n    const offsetInfo = offsetTree[startAIndex]\n    prevAOffset = offsetInfo.offset\n    const kv = findMaxKeyValue(newSizeTree, syncStart - 1)\n    prevIndex = kv[0]\n    prevSize = kv[1]!\n\n    if (offsetTree.length && offsetTree[startAIndex].size === findMaxKeyValue(newSizeTree, syncStart)[1]) {\n      startAIndex -= 1\n    }\n\n    offsetTree = offsetTree.slice(0, startAIndex + 1)\n  } else {\n    offsetTree = []\n  }\n\n  for (const { start: startIndex, value } of rangesWithin(newSizeTree, syncStart, Infinity)) {\n    const aOffset = (startIndex - prevIndex) * prevSize + prevAOffset\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex,\n    })\n    prevIndex = startIndex\n    prevAOffset = aOffset\n    prevSize = value\n  }\n\n  return {\n    sizeTree: newSizeTree,\n    offsetTree,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, offsetTree))\n    }, newTree<number>()),\n    lastIndex: prevIndex,\n    lastOffset: prevAOffset,\n    lastSize: prevSize,\n    groupIndices,\n  }\n}\n\nexport function offsetOf(index: number, tree: Array<OffsetPoint>) {\n  if (tree.length === 0) {\n    return 0\n  }\n\n  const { offset, index: startIndex, size } = arrayBinarySearch.findClosestSmallerOrEqual(tree, index, indexComparator)\n  return size * (index - startIndex) + offset\n}\n\nexport function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState) {\n  if (!hasGroups(sizes)) {\n    return itemIndex\n  }\n\n  let groupOffset = 0\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++\n  }\n  // we find the real item index, offsetting it by the number of group items before it\n  return itemIndex + groupOffset\n}\n\nexport function hasGroups(sizes: SizeState) {\n  return !empty(sizes.groupOffsetTree)\n}\n\ntype OptionalNumber = number | undefined\n\nconst SIZE_MAP = {\n  offsetHeight: 'height',\n  offsetWidth: 'width',\n} as const\n\n/** Calculates the height of `el`, which will be the `Item` element in the DOM. */\nexport type SizeFunction = (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\nexport const sizeSystem = u.system(\n  ([{ log }]) => {\n    const sizeRanges = u.stream<SizeRange[]>()\n    const totalCount = u.stream<number>()\n    const statefulTotalCount = u.statefulStreamFromEmitter(totalCount, 0)\n    const unshiftWith = u.stream<number>()\n    const firstItemIndex = u.statefulStream(0)\n    const groupIndices = u.statefulStream([] as number[])\n    const fixedItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const defaultItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const itemSize = u.statefulStream<SizeFunction>((el, field) => correctItemSize(el, SIZE_MAP[field]))\n    const data = u.statefulStream<Data>(undefined)\n    const initial = initialSizeState()\n\n    const sizes = u.statefulStreamFromEmitter(\n      u.pipe(sizeRanges, u.withLatestFrom(groupIndices, log), u.scan(sizeStateReducer, initial), u.distinctUntilChanged()),\n      initial\n    )\n\n    u.connect(\n      u.pipe(\n        groupIndices,\n        u.filter((indexes) => indexes.length > 0),\n        u.withLatestFrom(sizes),\n        u.map(([groupIndices, sizes]) => {\n          const groupOffsetTree = groupIndices.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes.offsetTree) || idx)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            groupIndices,\n            groupOffsetTree,\n          }\n        })\n      ),\n      sizes\n    )\n\n    // decreasing the total count should remove any existing entries\n    // beyond the last index - do this by publishing the default size as a range over them.\n    u.connect(\n      u.pipe(\n        totalCount,\n        u.withLatestFrom(sizes),\n        u.filter(([totalCount, { lastIndex }]) => {\n          return totalCount < lastIndex\n        }),\n        u.map(([totalCount, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount,\n              endIndex: lastIndex,\n              size: lastSize,\n            },\n          ] as SizeRange[]\n        })\n      ),\n      sizeRanges\n    )\n\n    u.connect(fixedItemSize, defaultItemSize)\n\n    const trackItemSizes = u.statefulStreamFromEmitter(\n      u.pipe(\n        fixedItemSize,\n        u.map((size) => size === undefined)\n      ),\n      true\n    )\n\n    u.connect(\n      u.pipe(\n        defaultItemSize,\n        u.filter((value) => {\n          return value !== undefined && empty(u.getValue(sizes).sizeTree)\n        }),\n        u.map((size) => [{ startIndex: 0, endIndex: 0, size }] as SizeRange[])\n      ),\n      sizeRanges\n    )\n\n    const listRefresh = u.streamFromEmitter(\n      u.pipe(\n        sizeRanges,\n        u.withLatestFrom(sizes),\n        u.scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes,\n            }\n          },\n          { changed: false, sizes: initial }\n        ),\n        u.map((value) => value.changed)\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        firstItemIndex,\n        u.scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next }\n          },\n          { diff: 0, prev: 0 }\n        ),\n        u.map((val) => val.diff),\n        u.filter((value) => value > 0)\n      ),\n      unshiftWith\n    )\n\n    u.subscribe(u.pipe(firstItemIndex, u.withLatestFrom(log)), ([index, log]) => {\n      if (index < 0) {\n        log(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        )\n      }\n    })\n\n    // Capture the current list top item before the sizes get refreshed\n    const beforeUnshiftWith = u.streamFromEmitter(unshiftWith)\n\n    u.connect(\n      u.pipe(\n        unshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([unshiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: prepending items does not work with groups')\n          }\n\n          return walk(sizes.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith,\n                prevSize: size,\n              }\n            },\n            {\n              ranges: [] as SizeRange[],\n              prevIndex: 0,\n              prevSize: sizes.lastSize,\n            }\n          ).ranges\n        })\n      ),\n      sizeRanges\n    )\n\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      beforeUnshiftWith,\n      firstItemIndex,\n\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize,\n    }\n  },\n  u.tup(loggerSystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromItemIndex, sizeSystem } from './sizeSystem'\nimport { IndexLocationWithAlign } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport type IndexLocation = number | IndexLocationWithAlign\n\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== 'undefined' && 'scrollBehavior' in document.documentElement.style\n\nexport function normalizeIndexLocation(location: IndexLocation) {\n  const result: IndexLocationWithAlign = typeof location === 'number' ? { index: location } : location\n\n  if (!result.align) {\n    result.align = 'start'\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = 'auto'\n  }\n  if (!result.offset) {\n    result.offset = 0\n  }\n  return result as Required<IndexLocationWithAlign>\n}\n\nexport const scrollToIndexSystem = u.system(\n  ([\n    { sizes, totalCount, listRefresh },\n    { scrollingInProgress, viewportHeight, scrollTo, smoothScrollTargetReached, headerHeight, footerHeight },\n    { log },\n  ]) => {\n    const scrollToIndex = u.stream<IndexLocation>()\n    const topListHeight = u.statefulStream(0)\n\n    let unsubscribeNextListRefresh: any = null\n    let cleartTimeoutRef: any = null\n    let unsubscribeListRefresh: any = null\n\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh()\n        unsubscribeNextListRefresh = null\n      }\n\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh()\n        unsubscribeListRefresh = null\n      }\n\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef)\n        cleartTimeoutRef = null\n      }\n      u.publish(scrollingInProgress, false)\n    }\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        u.map(([location, sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          const lastIndex = totalCount - 1\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = lastIndex\n          }\n\n          index = originalIndexFromItemIndex(index, sizes)\n\n          index = Math.max(0, index, Math.min(lastIndex, index))\n\n          let top = offsetOf(index, sizes.offsetTree) + headerHeight\n          if (align === 'end') {\n            top = top - viewportHeight + findMaxKeyValue(sizes.sizeTree, index)[1]!\n            if (index === lastIndex) {\n              top += footerHeight\n            }\n          } else if (align === 'center') {\n            top = top - viewportHeight / 2 + findMaxKeyValue(sizes.sizeTree, index)[1]! / 2\n          } else {\n            top -= topListHeight\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          const retry = (listChanged: boolean) => {\n            cleanup()\n            if (listChanged) {\n              log('retrying to scroll to', { location }, LogLevel.DEBUG)\n              u.publish(scrollToIndex, location)\n            } else {\n              log('list did not change, scroll successful', {}, LogLevel.DEBUG)\n            }\n          }\n\n          cleanup()\n\n          if (behavior === 'smooth') {\n            let listChanged = false\n            unsubscribeListRefresh = u.subscribe(listRefresh, (changed) => {\n              listChanged = listChanged || changed\n            })\n\n            unsubscribeNextListRefresh = u.handleNext(smoothScrollTargetReached, () => {\n              retry(listChanged)\n            })\n          } else {\n            unsubscribeNextListRefresh = u.handleNext(u.pipe(listRefresh, watchChangesFor(50)), retry)\n          }\n\n          // if the scroll jump is too small, the list won't get rerendered.\n          // clean this listener\n          cleartTimeoutRef = setTimeout(() => {\n            cleanup()\n          }, 1200)\n\n          u.publish(scrollingInProgress, true)\n          log('scrolling from index to', { index, top, behavior }, LogLevel.DEBUG)\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    return {\n      scrollToIndex,\n      topListHeight,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n)\n\nfunction watchChangesFor(limit: number): u.Operator<boolean> {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false)\n    }, limit)\n    return (value) => {\n      if (value) {\n        done(true)\n        clearTimeout(timeoutRef)\n      }\n    }\n  }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { UP, DOWN, ScrollDirection } from './stateFlagsSystem'\nimport { tupleComparator } from './comparators'\n\nexport type NumberTuple = [number, number]\nexport type Overscan = number | { main: number; reverse: number }\nexport const TOP = 'top' as const\nexport const BOTTOM = 'bottom' as const\nexport const NONE = 'none' as const\nexport type ListEnd = typeof TOP | typeof BOTTOM\nexport type ViewportIncrease = number | { [k in ListEnd]?: number }\nexport type ChangeDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport function getOverscan(overscan: Overscan, end: ListEnd, direction: ScrollDirection) {\n  if (typeof overscan === 'number') {\n    return (direction === UP && end === TOP) || (direction === DOWN && end === BOTTOM) ? overscan : 0\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse\n    }\n  }\n}\n\nfunction getViewportIncrease(value: ViewportIncrease, end: ListEnd) {\n  return typeof value === 'number' ? value : value[end] || 0\n}\n\nexport const sizeRangeSystem = u.system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight }]) => {\n    const listBoundary = u.stream<NumberTuple>()\n    const topListHeight = u.statefulStream(0)\n    const fixedHeaderHeight = u.statefulStream(0)\n    const increaseViewportBy = u.statefulStream<ViewportIncrease>(0)\n    const overscan = u.statefulStream<Overscan>(0)\n\n    const visibleRange = (u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          u.duc(scrollTop),\n          u.duc(viewportHeight),\n          u.duc(headerHeight),\n          u.duc(listBoundary, tupleComparator),\n          u.duc(overscan),\n          u.duc(topListHeight),\n          u.duc(fixedHeaderHeight),\n          u.duc(deviation),\n          u.duc(increaseViewportBy)\n        ),\n        u.map(\n          ([\n            scrollTop,\n            viewportHeight,\n            headerHeight,\n            [listTop, listBottom],\n            overscan,\n            topListHeight,\n            fixedHeaderHeight,\n            deviation,\n            increaseViewportBy,\n          ]) => {\n            const top = scrollTop - deviation\n            const stickyHeaderHeight = topListHeight + fixedHeaderHeight\n            const headerVisible = Math.max(headerHeight - top, 0)\n            let direction: ChangeDirection = NONE\n            const topViewportAddition = getViewportIncrease(increaseViewportBy, TOP)\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy, BOTTOM)\n\n            listTop -= deviation\n            listTop += headerHeight\n            listBottom += headerHeight\n            listBottom -= deviation\n\n            if (listTop > scrollTop + stickyHeaderHeight - topViewportAddition) {\n              direction = UP\n            }\n\n            if (listBottom < scrollTop - headerVisible + viewportHeight + bottomViewportAddition) {\n              direction = DOWN\n            }\n\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight - getOverscan(overscan, TOP, direction) - topViewportAddition, 0),\n                top -\n                  headerVisible -\n                  fixedHeaderHeight +\n                  viewportHeight +\n                  getOverscan(overscan, BOTTOM, direction) +\n                  bottomViewportAddition,\n              ] as NumberTuple\n            }\n\n            return null\n          }\n        ),\n        u.filter((value) => value != null),\n        u.distinctUntilChanged(tupleComparator as any)\n      ),\n      [0, 0]\n    ) as unknown) as u.StatefulStream<NumberTuple>\n\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      fixedHeaderHeight,\n      increaseViewportBy,\n\n      // output\n      visibleRange,\n    }\n  },\n  u.tup(domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { WindowViewportInfo } from './interfaces'\n\nexport const windowScrollerSystem = u.system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = u.stream<[number, number]>()\n  const windowViewportRect = u.stream<WindowViewportInfo>()\n  const windowScrollTo = u.stream<ScrollToOptions>()\n  const useWindowScroll = u.statefulStream(false)\n  const customScrollParent = u.statefulStream<HTMLElement | undefined>(undefined)\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(windowScrollContainerState, windowViewportRect),\n      u.map(([[windowScrollTop, scrollHeight], { offsetTop }]) => {\n        return [Math.max(0, windowScrollTop - offsetTop), scrollHeight]\n      })\n    ),\n    scrollContainerState\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTo,\n      u.withLatestFrom(windowViewportRect),\n      u.map(([scrollTo, { offsetTop }]) => {\n        return {\n          ...scrollTo,\n          top: scrollTo.top! + offsetTop,\n        }\n      })\n    ),\n    windowScrollTo\n  )\n\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n\n    // signals\n    windowScrollTo,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { domIOSystem } from './domIOSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { IndexLocation, normalizeIndexLocation } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\n\nexport interface ElementDimensions {\n  width: number\n  height: number\n}\n\nexport interface GridItem {\n  index: number\n}\n\nexport interface GridLayout {\n  top: number\n  bottom: number\n}\n\nexport interface GridState extends GridLayout {\n  items: GridItem[]\n  offsetTop: number\n  offsetBottom: number\n  itemHeight: number\n  itemWidth: number\n}\n\nconst INITIAL_GRID_STATE: GridState = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst PROBE_GRID_STATE: GridState = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst { ceil, floor, min, max } = Math\n\nfunction hackFloor(val: number) {\n  return ceil(val) - val < 0.03 ? ceil(val) : floor(val)\n}\n\nfunction buildItems(startIndex: number, endIndex: number) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => ({ index: i + startIndex } as GridItem))\n}\nexport const gridSystem = u.system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, windowScrollTo, useWindowScroll, customScrollParent, windowScrollContainerState },\n  ]) => {\n    const totalCount = u.statefulStream(0)\n    const initialItemCount = u.statefulStream(0)\n    const gridState = u.statefulStream(INITIAL_GRID_STATE)\n    const viewportDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const itemDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const scrollToIndex = u.stream<IndexLocation>()\n    const scrollHeight = u.stream<number>()\n    const deviation = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.map(([, count]) => {\n          return {\n            items: buildItems(0, count - 1),\n            top: 0,\n            bottom: 0,\n            offsetBottom: 0,\n            offsetTop: 0,\n            itemHeight: 0,\n            itemWidth: 0,\n          }\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(\n          u.duc(totalCount),\n          visibleRange,\n          u.duc(itemDimensions, (prev, next) => prev && prev.width === next.width && prev.height === next.height)\n        ),\n        u.withLatestFrom(viewportDimensions),\n        u.map(([[totalCount, [startOffset, endOffset], item], viewport]) => {\n          const { height: itemHeight, width: itemWidth } = item\n          const { width: viewportWidth } = viewport\n\n          if (totalCount === 0 || viewportWidth === 0) {\n            return INITIAL_GRID_STATE\n          }\n\n          if (itemWidth === 0) {\n            return PROBE_GRID_STATE\n          }\n\n          const perRow = hackFloor(viewportWidth / itemWidth)\n          let startIndex = perRow * floor(startOffset / itemHeight)\n          let endIndex = perRow * ceil(endOffset / itemHeight) - 1\n          endIndex = min(totalCount - 1, endIndex)\n          startIndex = min(endIndex, max(0, startIndex))\n\n          const items = buildItems(startIndex, endIndex)\n          const { top, bottom } = gridLayout(viewport, item, items)\n          const totalHeight = ceil(totalCount / perRow) * itemHeight\n          const offsetBottom = totalHeight - bottom\n\n          return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth } as GridState\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        viewportDimensions,\n        u.map(({ height }) => height)\n      ),\n      viewportHeight\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(viewportDimensions, itemDimensions, gridState),\n        u.map(([viewportDimensions, item, { items }]) => {\n          const { top, bottom } = gridLayout(viewportDimensions, item, items)\n\n          return [top, bottom] as [number, number]\n        }),\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].index === totalCount - 1),\n        u.map(([, totalCount]) => totalCount - 1),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0\n        }),\n        u.mapTo(0),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          }\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    u.connect(rangeChanged, scrollSeek.scrollSeekRangeChanged)\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(viewportDimensions, itemDimensions, totalCount),\n        u.map(([location, viewport, item, totalCount]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = totalCount - 1\n          }\n\n          index = Math.max(0, index, Math.min(totalCount - 1, index))\n\n          let top = itemTop(viewport, item, index)\n\n          if (align === 'end') {\n            top = Math.round(top - viewport.height + item.height)\n          } else if (align === 'center') {\n            top = Math.round(top - viewport.height / 2 + item.height / 2)\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        gridState,\n        u.map((gridState) => {\n          return gridState.offsetBottom + gridState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(\n      u.pipe(\n        windowViewportRect,\n        u.map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    )\n\n    return {\n      // input\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      initialItemCount,\n      ...scrollSeek,\n\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      propsReady,\n    }\n  },\n  u.tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem)\n)\n\nfunction gridLayout(viewport: ElementDimensions, item: ElementDimensions, items: GridItem[]): GridLayout {\n  const { height: itemHeight } = item\n  if (itemHeight === undefined || items.length === 0) {\n    return { top: 0, bottom: 0 }\n  }\n\n  const top = itemTop(viewport, item, items[0].index)\n  const bottom = itemTop(viewport, item, items[items.length - 1].index) + itemHeight\n  return { top, bottom }\n}\n\nfunction itemTop(viewport: ElementDimensions, item: ElementDimensions, index: number) {\n  const perRow = itemsPerRow(viewport.width, item.width)\n  return floor(index / perRow) * item.height\n}\n\nfunction itemsPerRow(viewportWidth: number, itemWidth: number) {\n  return hackFloor(viewportWidth / itemWidth)\n}\n","import { useRef } from 'react'\n\nexport type CallbackRefParam = HTMLElement | null\n\nexport function useSizeWithElRef(callback: (e: HTMLElement) => void, enabled = true) {\n  const ref = useRef<CallbackRefParam>(null)\n\n  let callbackRef = (_el: CallbackRefParam) => {\n    void 0\n  }\n\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      const element = entries[0].target as HTMLElement\n      if (element.offsetParent !== null) {\n        callback(element)\n      }\n    })\n\n    callbackRef = (elRef: CallbackRefParam) => {\n      if (elRef && enabled) {\n        observer.observe(elRef)\n        ref.current = elRef\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current)\n        }\n        ref.current = null\n      }\n    }\n  }\n\n  return { ref, callbackRef }\n}\n\nexport default function useSize(callback: (e: HTMLElement) => void, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef\n}\n","import { useEffect, useRef, useCallback } from 'react'\nimport { useSizeWithElRef } from './useSize'\nimport { WindowViewportInfo } from '../interfaces'\n\nexport default function useWindowViewportRectRef(callback: (info: WindowViewportInfo) => void, customScrollParent?: HTMLElement) {\n  const viewportInfo = useRef<WindowViewportInfo | null>(null)\n\n  const calculateInfo = useCallback(\n    (element: HTMLElement | null) => {\n      if (element === null) {\n        return\n      }\n      const rect = element.getBoundingClientRect()\n      const visibleWidth = rect.width\n      let visibleHeight: number, offsetTop: number\n\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect()\n        const deltaTop = rect.top - customScrollParentRect.top\n\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop)\n        offsetTop = deltaTop + customScrollParent.scrollTop\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top)\n        offsetTop = rect.top + window.pageYOffset\n      }\n\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth,\n      }\n\n      callback(viewportInfo.current)\n    },\n    [callback, customScrollParent]\n  )\n\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo)\n\n  const scrollAndResizeEventHandler = useCallback(() => {\n    calculateInfo(ref.current)\n  }, [calculateInfo, ref])\n\n  useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener('scroll', scrollAndResizeEventHandler)\n      const observer = new ResizeObserver(scrollAndResizeEventHandler)\n      observer.observe(customScrollParent)\n      return () => {\n        customScrollParent.removeEventListener('scroll', scrollAndResizeEventHandler)\n        observer.unobserve(customScrollParent)\n      }\n    } else {\n      window.addEventListener('scroll', scrollAndResizeEventHandler)\n      window.addEventListener('resize', scrollAndResizeEventHandler)\n      return () => {\n        window.removeEventListener('scroll', scrollAndResizeEventHandler)\n        window.removeEventListener('resize', scrollAndResizeEventHandler)\n      }\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent])\n\n  return callbackRef\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import { Log, LogLevel } from '../loggerSystem'\nimport { SizeFunction, SizeRange } from '../sizeSystem'\nimport useSize from './useSize'\n\nexport default function useChangedListContentsSizes(\n  callback: (ranges: SizeRange[]) => void,\n  itemSize: SizeFunction,\n  enabled: boolean,\n  scrollContainerStateCallback: (state: [number, number]) => void,\n  log: Log,\n  customScrollParent?: HTMLElement\n) {\n  return useSize((el: HTMLElement) => {\n    const ranges = getChangedChildSizes(el.children, itemSize, 'offsetHeight', log)\n    let scrollableElement = el.parentElement!\n\n    while (!scrollableElement.dataset['virtuosoScroller']) {\n      scrollableElement = scrollableElement.parentElement!\n    }\n\n    const scrollTop = customScrollParent\n      ? customScrollParent.scrollTop\n      : // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      (scrollableElement.firstElementChild! as HTMLDivElement).dataset['viewportType']! === 'window'\n      ? window.pageYOffset || document.documentElement.scrollTop\n      : scrollableElement.scrollTop\n\n    customScrollParent\n      ? scrollContainerStateCallback([Math.max(scrollTop, 0), customScrollParent.scrollHeight])\n      : scrollContainerStateCallback([Math.max(scrollTop, 0), scrollableElement.scrollHeight])\n    if (ranges !== null) {\n      callback(ranges)\n    }\n  }, enabled)\n}\n\nfunction getChangedChildSizes(children: HTMLCollection, itemSize: SizeFunction, field: 'offsetHeight' | 'offsetWidth', log: Log) {\n  const length = children.length\n\n  if (length === 0) {\n    return null\n  }\n\n  const results: SizeRange[] = []\n\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i) as HTMLElement\n\n    if (!child || child.dataset.index === undefined) {\n      continue\n    }\n\n    const index = parseInt(child.dataset.index!)\n    const knownSize = parseFloat(child.dataset.knownSize!)\n    const size = itemSize(child, field)\n\n    if (size === 0) {\n      log('Zero-sized element, this should not happen', { child }, LogLevel.ERROR)\n    }\n\n    if (size === knownSize) {\n      continue\n    }\n\n    const lastResult = results[results.length - 1]\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size })\n    } else {\n      results[results.length - 1].endIndex++\n    }\n  }\n\n  return results\n}\n","import { useRef, useCallback, useEffect } from 'react'\nimport * as u from '@virtuoso.dev/urx'\nimport { correctItemSize } from '../utils/correctItemSize'\n\nexport type ScrollerRef = Window | HTMLElement | null\n\nfunction approximatelyEqual(num1: number, num2: number) {\n  return Math.abs(num1 - num2) < 1.01\n}\n\nexport default function useScrollTop(\n  scrollContainerStateCallback: (state: [number, number]) => void,\n  smoothScrollTargetReached: (yes: true) => void,\n  scrollerElement: any,\n  scrollerRefCallback: (ref: ScrollerRef) => void = u.noop,\n  customScrollParent?: HTMLElement\n) {\n  const scrollerRef = useRef<HTMLElement | null | Window>(null)\n  const scrollTopTarget = useRef<any>(null)\n  const timeoutRef = useRef<any>(null)\n\n  const handler = useCallback(\n    (ev: Event) => {\n      const el = ev.target as HTMLElement\n      const scrollTop =\n        (el as any) === window || (el as any) === document ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop\n      const scrollHeight = (el as any) === window ? document.documentElement.scrollHeight : el.scrollHeight\n\n      scrollContainerStateCallback([Math.max(scrollTop, 0), scrollHeight])\n\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === el.scrollHeight - correctItemSize(el, 'height')) {\n          scrollTopTarget.current = null\n          smoothScrollTargetReached(true)\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current)\n            timeoutRef.current = null\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  )\n\n  useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current!\n\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current)\n    handler(({ target: localRef } as unknown) as Event)\n    localRef.addEventListener('scroll', handler, { passive: true })\n\n    return () => {\n      scrollerRefCallback(null)\n      localRef.removeEventListener('scroll', handler)\n    }\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent])\n\n  function scrollToCallback(location: ScrollToOptions) {\n    const scrollerElement = scrollerRef.current\n    if (!scrollerElement || ('offsetHeight' in scrollerElement && scrollerElement.offsetHeight === 0)) {\n      return\n    }\n\n    const isSmooth = location.behavior === 'smooth'\n\n    let offsetHeight: number\n    let scrollHeight: number\n    let scrollTop: number\n\n    if (scrollerElement === window) {\n      // this is not a mistake\n      scrollHeight = Math.max(correctItemSize(document.documentElement, 'height'), document.documentElement.scrollHeight)\n      offsetHeight = window.innerHeight\n      scrollTop = document.documentElement.scrollTop\n    } else {\n      scrollHeight = (scrollerElement as HTMLElement).scrollHeight\n      offsetHeight = correctItemSize(scrollerElement as HTMLElement, 'height')\n      scrollTop = (scrollerElement as HTMLElement).scrollTop\n    }\n\n    const maxScrollTop = scrollHeight - offsetHeight\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top!), 0))\n\n    // avoid system hanging because the DOM never called back\n    // with the scrollTop\n    // scroller is already at this location\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback([scrollTop, scrollHeight])\n      if (isSmooth) {\n        smoothScrollTargetReached(true)\n      }\n      return\n    }\n\n    if (isSmooth) {\n      scrollTopTarget.current = location.top\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current)\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null\n        scrollTopTarget.current = null\n        smoothScrollTargetReached(true)\n      }, 1000)\n    } else {\n      scrollTopTarget.current = null\n    }\n\n    scrollerElement.scrollTo(location)\n  }\n\n  function scrollByCallback(location: ScrollToOptions) {\n    if (scrollTopTarget.current === null) {\n      scrollerRef.current!.scrollBy(location)\n    }\n  }\n\n  return { scrollerRef, scrollByCallback, scrollToCallback }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { empty } from './AATree'\nimport { sizeSystem } from './sizeSystem'\nimport { domIOSystem } from './domIOSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialTopMostItemIndexSystem = u.system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = u.statefulStream(true)\n    const initialTopMostItemIndex = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialTopMostItemIndex),\n        u.filter(([_, index]) => index !== 0),\n        u.mapTo(false)\n      ),\n      scrolledToInitialItem\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(listRefresh, didMount),\n        u.withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize),\n        u.filter(([[, didMount], scrolledToInitialItem, { sizeTree }, defaultItemSize]) => {\n          return didMount && (!empty(sizeTree) || defaultItemSize !== undefined) && !scrolledToInitialItem\n        }),\n        u.withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex]) => {\n        setTimeout(() => {\n          u.handleNext(scrollTop, () => {\n            u.publish(scrolledToInitialItem, true)\n          })\n          u.publish(scrollToIndex, initialTopMostItemIndex)\n        })\n      }\n    )\n\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { FollowOutput, FollowOutputScalarType } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { domIOSystem } from './domIOSystem'\n\nfunction normalizeFollowOutput(follow: FollowOutputScalarType): FollowOutputScalarType {\n  if (!follow) {\n    return false\n  }\n  return follow === 'smooth' ? 'smooth' : 'auto'\n}\n\nconst behaviorFromFollowOutput = (follow: FollowOutput, isAtBottom: boolean) => {\n  if (typeof follow === 'function') {\n    return normalizeFollowOutput(follow(isAtBottom))\n  }\n  return isAtBottom && normalizeFollowOutput(follow)\n}\n\nexport const followOutputSystem = u.system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress },\n  ]) => {\n    const followOutput = u.statefulStream<FollowOutput>(false)\n    let pendingScrollHandle: any = null\n\n    function scrollToBottom(followOutputBehavior: FollowOutputScalarType) {\n      u.publish(scrollToIndex, {\n        index: 'LAST',\n        align: 'end',\n        behavior: followOutputBehavior,\n      })\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.pipe(u.duc(totalCount), u.skip(1)), didMount),\n        u.withLatestFrom(u.duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        u.map(([[totalCount, didMount], followOutput, isAtBottom, scrolledToInitialItem, scrollingInProgress]) => {\n          let shouldFollow = didMount && scrolledToInitialItem\n          let followOutputBehavior: FollowOutputScalarType = 'auto'\n\n          if (shouldFollow) {\n            // if scrolling to index is in progress,\n            // assume that a previous followOutput response is going\n            followOutputBehavior = behaviorFromFollowOutput(followOutput, isAtBottom || scrollingInProgress)\n            shouldFollow = shouldFollow && !!followOutputBehavior\n          }\n\n          return { totalCount, shouldFollow, followOutputBehavior }\n        }),\n        u.filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle()\n          pendingScrollHandle = null\n        }\n\n        pendingScrollHandle = u.handleNext(listRefresh, () => {\n          u.getValue(log)('following output to ', { totalCount }, LogLevel.DEBUG)\n          scrollToBottom(followOutputBehavior)\n          pendingScrollHandle = null\n        })\n      }\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.duc(followOutput), totalCount, propsReady),\n        u.filter(([follow, , ready]) => follow && ready),\n        u.scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next }\n          },\n          { refreshed: false, value: 0 }\n        ),\n        u.filter(({ refreshed }) => refreshed),\n        u.withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput]) => {\n        const cancel = u.handleNext(atBottomState, (state) => {\n          if (followOutput && !state.atBottom && state.notAtBottomBecause === 'SIZE_INCREASED' && !pendingScrollHandle) {\n            u.getValue(log)('scrolling to bottom due to increased size', {}, LogLevel.DEBUG)\n            scrollToBottom('auto')\n          }\n        })\n        setTimeout(cancel, 100)\n      }\n    )\n\n    u.subscribe(u.combineLatest(u.duc(followOutput), atBottomState), ([followOutput, state]) => {\n      if (followOutput && !state.atBottom && state.notAtBottomBecause === 'VIEWPORT_HEIGHT_DECREASING') {\n        scrollToBottom('auto')\n      }\n    })\n\n    return { followOutput }\n  },\n  u.tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n)\n","import {\n  combineLatest,\n  connect,\n  distinctUntilChanged,\n  system,\n  filter,\n  map,\n  pipe,\n  prop,\n  stream,\n  streamFromEmitter,\n  tup,\n} from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { sizeSystem, hasGroups } from './sizeSystem'\nexport interface GroupIndexesAndCount {\n  totalCount: number\n  groupIndices: number[]\n}\n\nexport function groupCountsToIndicesAndCount(counts: number[]) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount)\n      acc.totalCount += groupCount + 1\n      return acc\n    },\n    {\n      totalCount: 0,\n      groupIndices: [],\n    } as GroupIndexesAndCount\n  )\n}\n\nexport const groupedListSystem = system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = stream<number[]>()\n  const topItemsIndexes = stream<[number]>()\n  const groupIndicesAndCount = streamFromEmitter(pipe(groupCounts, map(groupCountsToIndicesAndCount)))\n  connect(pipe(groupIndicesAndCount, map(prop('totalCount'))), totalCount)\n  connect(pipe(groupIndicesAndCount, map(prop('groupIndices'))), groupIndices)\n\n  connect(\n    pipe(\n      combineLatest(scrollTop, sizes, headerHeight),\n      filter(([_, sizes]) => hasGroups(sizes)),\n      map(([scrollTop, state, headerHeight]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop - headerHeight, 0), 'v')[0]),\n      distinctUntilChanged(),\n      map((index) => [index])\n    ),\n    topItemsIndexes\n  )\n\n  return { groupCounts, topItemsIndexes }\n}, tup(sizeSystem, domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { empty, findMaxKeyValue, Range, rangesWithin } from './AATree'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { Item, ListItem, ListRange } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { Data, originalIndexFromItemIndex, SizeState, sizeSystem, hasGroups, rangesWithinOffsets } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { rangeComparator, tupleComparator } from './comparators'\n\nexport type ListItems = ListItem<unknown>[]\nexport interface TopListState {\n  items: ListItems\n  listHeight: number\n}\n\nexport interface ListState {\n  items: ListItems\n  topItems: ListItems\n  topListHeight: number\n  offsetTop: number\n  offsetBottom: number\n  top: number\n  bottom: number\n  totalCount: number\n}\n\nfunction probeItemSet(index: number, sizes: SizeState, data: Data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes)\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0]\n\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] },\n    ]\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }]\n}\n\nconst EMPTY_LIST_STATE: ListState = {\n  items: [] as ListItems,\n  topItems: [] as ListItems,\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n}\n\nfunction transposeItems(items: Item<any>[], sizes: SizeState, firstItemIndex: number): ListItems {\n  if (items.length === 0) {\n    return []\n  }\n\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }))\n  }\n\n  const startIndex = items[0].index\n  const endIndex = items[items.length - 1].index\n\n  const transposedItems = [] as ListItems\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex)\n  let currentRange: Range<number> | undefined = undefined\n  let currentGroupIndex = 0\n\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift()!\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start)\n    }\n\n    let transposedItem: { type: 'group'; index: number } | { index: number; groupIndex: number }\n\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: 'group' as const,\n        index: currentGroupIndex,\n      }\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex,\n      }\n    }\n\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data,\n    })\n  }\n\n  return transposedItems\n}\n\nexport function buildListState(\n  items: Item<any>[],\n  topItems: Item<any>[],\n  totalCount: number,\n  sizes: SizeState,\n  firstItemIndex: number\n): ListState {\n  const { lastSize, lastOffset, lastIndex } = sizes\n  let offsetTop = 0\n  let bottom = 0\n\n  if (items.length > 0) {\n    offsetTop = items[0].offset\n    const lastItem = items[items.length - 1]\n    bottom = lastItem.offset + lastItem.size\n  }\n\n  const total = lastOffset + (totalCount - lastIndex) * lastSize\n  const top = offsetTop\n  const offsetBottom = total - bottom\n\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n  }\n}\n\nexport const listStateSystem = u.system(\n  ([\n    { sizes, totalCount, data, firstItemIndex },\n    groupedListSystem,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n  ]) => {\n    const topItemsIndexes = u.statefulStream<Array<number>>([])\n    const itemsRendered = u.stream<ListItems>()\n\n    u.connect(groupedListSystem.topItemsIndexes, topItemsIndexes)\n\n    const listState = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          didMount,\n          u.duc(visibleRange),\n          u.duc(totalCount),\n          u.duc(sizes),\n          u.duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          u.duc(topItemsIndexes),\n          u.duc(firstItemIndex),\n          data\n        ),\n        u.filter(([mount]) => mount),\n        u.map(\n          ([\n            ,\n            [startOffset, endOffset],\n            totalCount,\n            sizes,\n            initialTopMostItemIndex,\n            scrolledToInitialItem,\n            topItemsIndexes,\n            firstItemIndex,\n            data,\n          ]) => {\n            const sizesValue = sizes\n            const { sizeTree, offsetTree } = sizesValue\n\n            if (totalCount === 0 || (startOffset === 0 && endOffset === 0)) {\n              return EMPTY_LIST_STATE\n            }\n\n            if (empty(sizeTree)) {\n              return buildListState(probeItemSet(initialTopMostItemIndex, sizesValue, data), [], totalCount, sizesValue, firstItemIndex)\n            }\n\n            const topItems = [] as Item<any>[]\n\n            if (topItemsIndexes.length > 0) {\n              const startIndex = topItemsIndexes[0]\n              const endIndex = topItemsIndexes[topItemsIndexes.length - 1]\n              let offset = 0\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value\n                const rangeStartIndex = Math.max(range.start, startIndex)\n                const rangeEndIndex = Math.min(range.end, endIndex)\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            }\n\n            // If the list hasn't scrolled to the initial item because the initial item was set,\n            // render empty list.\n            //\n            // This is a condition to be evaluated past the probe check, do not merge\n            // with the totalCount check above\n            if (!scrolledToInitialItem) {\n              return buildListState([], topItems, totalCount, sizesValue, firstItemIndex)\n            }\n\n            const minStartIndex = topItemsIndexes.length > 0 ? topItemsIndexes[topItemsIndexes.length - 1] + 1 : 0\n\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex)\n            if (offsetPointRanges.length === 0) {\n              return null\n            }\n\n            const maxIndex = totalCount - 1\n\n            const items = u.tap([] as Item<any>[], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value\n                let offset = point.offset\n                let rangeStartIndex = range.start\n                const size = point.size\n\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset) / size)\n                  offset += (rangeStartIndex - range.start) * size\n                }\n\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size\n                  rangeStartIndex = minStartIndex\n                }\n\n                const endIndex = Math.min(range.end, maxIndex)\n\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break\n                  }\n\n                  result.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            })\n\n            return buildListState(items, topItems, totalCount, sizesValue, firstItemIndex)\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        u.filter((value) => value !== null),\n        u.distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    )\n\n    u.connect(\n      u.pipe(\n        data,\n        u.filter((data) => data !== undefined),\n        u.map((data) => data!.length)\n      ),\n      totalCount\n    )\n\n    u.connect(u.pipe(listState, u.map(u.prop('topListHeight'))), topListHeight)\n    u.connect(topListHeight, rangeTopListHeight)\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => state.items)\n      ),\n      itemsRendered\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount, data),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].originalIndex === totalCount - 1),\n        u.map(([, totalCount, data]) => [totalCount - 1, data] as [number, unknown[]]),\n        u.distinctUntilChanged(tupleComparator),\n        u.map(([count]) => count as number)\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.throttleTime(200),\n        u.filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length\n        }),\n        u.map(({ items }) => items[0].index),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          } as ListRange\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags }\n  },\n  u.tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem\n  ),\n  { singleton: true }\n)\n","export function simpleMemoize<T extends () => any>(func: T): T {\n  let called = false\n  let result: unknown\n\n  return (() => {\n    if (!called) {\n      called = true\n      result = func()\n    }\n    return result\n  }) as T\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem, buildListState } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialItemCountSystem = u.system(\n  ([{ sizes, firstItemIndex, data }, { listState }, { didMount }]) => {\n    const initialItemCount = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.withLatestFrom(sizes, firstItemIndex, data),\n        u.map(([[, count], sizes, firstItemIndex, data = []]) => {\n          let includedGroupsCount = 0\n          if (sizes.groupIndices.length > 0) {\n            for (const index of sizes.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break\n              }\n              includedGroupsCount++\n            }\n          }\n          const adjustedCount = count + includedGroupsCount\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data[index] }))\n          return buildListState(items, [], adjustedCount, sizes, firstItemIndex)\n        })\n      ),\n      listState\n    )\n\n    return { initialItemCount }\n  },\n  u.tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n)\n","import { connect, system, map, pipe, statefulStream, tup, filter } from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\n\nexport const topItemCountSystem = system(([{ topItemsIndexes }]) => {\n  const topItemCount = statefulStream(0)\n\n  connect(\n    pipe(\n      topItemCount,\n      filter((length) => length > 0),\n      map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  )\n  return { topItemCount }\n}, tup(listStateSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const totalListHeightSystem = u.system(\n  ([{ footerHeight, headerHeight }, { listState }]) => {\n    const totalListHeightChanged = u.stream<number>()\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(footerHeight, headerHeight, listState),\n        u.map(([footerHeight, headerHeight, listState]) => {\n          return footerHeight + headerHeight + listState.offsetBottom + listState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(u.duc(totalListHeight), totalListHeightChanged)\n\n    return { totalListHeight, totalListHeightChanged }\n  },\n  u.tup(domIOSystem, listStateSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { UP, stateFlagsSystem } from './stateFlagsSystem'\nimport { ListItem } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\n/**\n * Fixes upward scrolling by calculating and compensation from changed item heights, using scrollBy.\n */\nexport const upwardScrollFixSystem = u.system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, atBottomState, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, sizes },\n    { log },\n  ]) => {\n    const deviationOffset = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.withLatestFrom(lastJumpDueToItemResize),\n        u.scan(\n          ([, prevItems, prevTotalCount], [{ items, totalCount }, lastJumpDueToItemResize]) => {\n            let newDev = 0\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const firstItemIndex = items[0].originalIndex\n                const prevFirstItemIndex = prevItems[0].originalIndex\n                const atStart = firstItemIndex === 0 && prevFirstItemIndex === 0\n                const onlyItem = items.length === 1\n\n                if (!atStart) {\n                  for (let index = items.length - 1; index >= 0; index--) {\n                    const item = items[index]\n\n                    const prevItem = prevItems.find((pItem) => pItem.originalIndex === item.originalIndex)\n\n                    if (!prevItem) {\n                      continue\n                    }\n\n                    if (item.offset !== prevItem.offset || onlyItem) {\n                      newDev = item.offset - prevItem.offset + item.size - prevItem.size\n                      break\n                    }\n                  }\n                }\n              }\n\n              if (newDev !== 0) {\n                newDev += lastJumpDueToItemResize\n              }\n            }\n\n            return [newDev, items, totalCount] as [number, ListItem<any>[], number]\n          },\n          [0, [], 0] as [number, ListItem<any>[], number]\n        ),\n        u.filter(([amount]) => amount !== 0),\n        u.withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, log, isAtBottom, atBottomState),\n        u.filter(([, scrollTop, scrollDirection, scrollingInProgress]) => {\n          // console.log({ amount, scrollTop, scrollDirection, scrollingInProgress, isAtBottom, atBottomState })\n          return !scrollingInProgress && scrollTop !== 0 && scrollDirection === UP // && (isAtBottom ? amount > 0 : true)\n        }),\n        u.map(([[amount], , , , log]) => {\n          log('Upward scrolling compensation', { amount }, LogLevel.DEBUG)\n          return amount\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        deviationOffset,\n        u.withLatestFrom(deviation),\n        u.map(([amount, deviation]) => deviation - amount)\n      ),\n      deviation\n    )\n\n    // when the browser stops scrolling,\n    // restore the position and reset the glitching\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.statefulStreamFromEmitter(isScrolling, false), deviation),\n        u.filter(([is, deviation]) => !is && deviation !== 0),\n        u.map(([_, deviation]) => deviation),\n        u.throttleTime(1)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n          u.publish(deviation, 0)\n        } else {\n          u.publish(deviation, 0)\n          u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n        }\n      }\n    )\n\n    u.connect(\n      u.pipe(\n        beforeUnshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([offset, { lastSize }]) => offset * lastSize)\n      ),\n      deviationOffset\n    )\n\n    return { deviation }\n  },\n  u.tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const initialScrollTopSystem = u.system(\n  ([{ totalListHeight }, { didMount }, { scrollTo }]) => {\n    const initialScrollTop = u.statefulStream(0)\n\n    u.subscribe(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialScrollTop),\n        u.filter(([, offset]) => offset !== 0),\n        u.map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        u.handleNext(\n          u.pipe(\n            totalListHeight,\n            u.filter((val) => val !== 0)\n          ),\n          () => {\n            setTimeout(() => {\n              u.publish(scrollTo, location)\n            })\n          }\n        )\n      }\n    )\n\n    return {\n      initialScrollTop,\n    }\n  },\n  u.tup(totalListHeightSystem, propsReadySystem, domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const alignToBottomSystem = u.system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = u.statefulStream(false)\n\n    const paddingTopAddition = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        u.filter(([enabled]) => enabled),\n        u.map(([, viewportHeight, totalListHeight]) => {\n          return Math.max(0, viewportHeight - totalListHeight)\n        }),\n        u.distinctUntilChanged()\n      ),\n      0\n    )\n\n    return { alignToBottom, paddingTopAddition }\n  },\n  u.tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromItemIndex, sizeSystem } from './sizeSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { listStateSystem } from './listStateSystem'\n\nexport interface ScrollIntoViewLocation {\n  index: number\n  behavior?: 'auto' | 'smooth'\n  done?: () => void\n}\n\nexport const scrollIntoViewSystem = u.system(\n  ([{ sizes, totalCount }, { scrollTop, viewportHeight, headerHeight, scrollingInProgress }, { scrollToIndex }]) => {\n    const scrollIntoView = u.stream<ScrollIntoViewLocation>()\n\n    u.connect(\n      u.pipe(\n        scrollIntoView,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, scrollTop),\n        u.map(([{ index, behavior = 'auto', done }, sizes, viewportHeight, totalCount, headerHeight, scrollTop]) => {\n          const lastIndex = totalCount - 1\n          let location = null\n          index = originalIndexFromItemIndex(index, sizes)\n          index = Math.max(0, index, Math.min(lastIndex, index))\n\n          const itemTop = offsetOf(index, sizes.offsetTree) + headerHeight\n          if (itemTop < scrollTop) {\n            location = { index, behavior, align: 'start' }\n          } else {\n            const itemBottom = itemTop + findMaxKeyValue(sizes.sizeTree, index)[1]!\n\n            if (itemBottom > scrollTop + viewportHeight) {\n              location = { index, behavior, align: 'end' }\n            }\n          }\n\n          if (location) {\n            done &&\n              u.handleNext(\n                u.pipe(\n                  scrollingInProgress,\n                  u.skip(1),\n                  u.filter((value) => value === false)\n                ),\n                done\n              )\n          } else {\n            done && done()\n          }\n\n          return location\n        }),\n        u.filter((value) => value !== null)\n      ),\n      scrollToIndex\n    )\n\n    return {\n      scrollIntoView,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { followOutputSystem } from './followOutputSystem'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialItemCountSystem } from './initialItemCountSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { topItemCountSystem } from './topItemCountSystem'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { upwardScrollFixSystem } from './upwardScrollFixSystem'\nimport { initialScrollTopSystem } from './initialScrollTopSystem'\nimport { alignToBottomSystem } from './alignToBottomSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollIntoViewSystem } from './scrollIntoViewSystem'\n\n// workaround the growing list of systems below\n// fix this with 4.1 recursive conditional types\nconst featureGroup1System = u.system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n    }\n  },\n  u.tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem\n  )\n)\n\nexport const listSystem = u.system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1,\n    log,\n  ]) => {\n    u.connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged)\n    u.connect(u.pipe(featureGroup1.windowViewportRect, u.map(u.prop('visibleHeight'))), domIO.viewportHeight)\n\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      ...followOutput,\n\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      ...log,\n    }\n  },\n  u.tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System,\n    loggerSystem\n  )\n)\n","import { simpleMemoize } from './simpleMemoize'\n\nconst WEBKIT_STICKY = '-webkit-sticky'\nconst STICKY = 'sticky'\n\nexport const positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === 'undefined') {\n    return STICKY\n  }\n  const node = document.createElement('div')\n  node.style.position = WEBKIT_STICKY\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY\n})\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport {\n  compose,\n  connect,\n  getValue,\n  map,\n  pipe,\n  publish,\n  statefulStream,\n  stream,\n  Stream,\n  subscribe,\n  system,\n  tup,\n  withLatestFrom,\n  statefulStreamFromEmitter,\n  distinctUntilChanged,\n  noop,\n} from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, CSSProperties, FC } from 'react'\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport useScrollTop from './hooks/useScrollTop'\nimport useSize from './hooks/useSize'\nimport { Components, ComputeItemKey, GroupContent, GroupItemContent, ItemContent, ListRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { positionStickyCssValue } from './utils/positionStickyCssValue'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { correctItemSize } from './utils/correctItemSize'\n\nexport function identity<T>(value: T) {\n  return value\n}\n\nconst listComponentPropsSystem = system(() => {\n  const itemContent = statefulStream<ItemContent<any> | GroupItemContent<any>>((index: number) => `Item ${index}`)\n  const groupContent = statefulStream<GroupContent>((index: number) => `Group ${index}`)\n  const components = statefulStream<Components>({})\n  const computeItemKey = statefulStream<ComputeItemKey<any>>(identity)\n  const headerFooterTag = statefulStream('div')\n  const scrollerRef = statefulStream<(ref: HTMLElement | Window | null) => void>(noop)\n\n  const distinctProp = <K extends keyof Components>(propName: K, defaultValue: Components[K] | null | 'div' = null) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components) => components[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp('Footer'),\n    HeaderComponent: distinctProp('Header'),\n    TopItemListComponent: distinctProp('TopItemList'),\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    GroupComponent: distinctProp('Group', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nexport function addDeprecatedAlias<T>(prop: Stream<T>, message: string) {\n  const alias = stream<T>()\n  subscribe(alias, () =>\n    console.warn(`react-virtuoso: You are using a deprecated property. ${message}`, 'color: red;', 'color: inherit;', 'color: blue;')\n  )\n  connect(alias, prop)\n  return alias\n}\n\nconst combinedSystem = system(([listSystem, propsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(propsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    group: addDeprecatedAlias(propsSystem.groupContent, 'Rename the %cgroup%c prop to %cgroupContent.'),\n    topItems: addDeprecatedAlias(listSystem.topItemCount, 'Rename the %ctopItems%c prop to %ctopItemCount.'),\n    itemHeight: addDeprecatedAlias(listSystem.fixedItemHeight, 'Rename the %citemHeight%c prop to %cfixedItemHeight.'),\n    scrollingStateChange: addDeprecatedAlias(listSystem.isScrolling, 'Rename the %cscrollingStateChange%c prop to %cisScrolling.'),\n    adjustForPrependedItems: stream<any>(),\n    maxHeightCacheSize: stream<any>(),\n    footer: stream<any>(),\n    header: stream<any>(),\n    HeaderContainer: stream<any>(),\n    FooterContainer: stream<any>(),\n    ItemContainer: stream<any>(),\n    ScrollContainer: stream<any>(),\n    GroupContainer: stream<any>(),\n    ListContainer: stream<any>(),\n    emptyComponent: stream<any>(),\n    scrollSeek: stream<any>(),\n  }\n\n  subscribe(deprecatedProps.adjustForPrependedItems, () => {\n    console.warn(\n      `react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.`,\n      'color: red;',\n      'color: inherit;',\n      'color: blue;'\n    )\n  })\n\n  subscribe(deprecatedProps.maxHeightCacheSize, () => {\n    console.warn(`react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.`)\n  })\n\n  subscribe(deprecatedProps.HeaderContainer, () => {\n    console.warn(\n      `react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.`\n    )\n  })\n\n  subscribe(deprecatedProps.FooterContainer, () => {\n    console.warn(\n      `react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.`\n    )\n  })\n\n  function deprecateComponentProp(stream: Stream<any>, componentName: string, propName: string) {\n    connect(\n      pipe(\n        stream,\n        withLatestFrom(propsSystem.components),\n        map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      propsSystem.components\n    )\n  }\n\n  subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    publish(propsSystem.components, { ...getValue(propsSystem.components), ScrollSeekPlaceholder: placeholder })\n    publish(listSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.footer, 'Footer', 'footer')\n  deprecateComponentProp(deprecatedProps.header, 'Header', 'header')\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n  deprecateComponentProp(deprecatedProps.emptyComponent, 'EmptyPlaceholder', 'emptyComponent')\n  deprecateComponentProp(deprecatedProps.GroupContainer, 'Group', 'GroupContainer')\n\n  return { ...listSystem, ...propsSystem, ...deprecatedProps }\n}, tup(listSystem, listComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => <div style={{ height }}></div>\n\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: 'none' }\n\nexport const Items = React.memo(function VirtuosoItems({ showTopList = false }: { showTopList?: boolean }) {\n  const listState = useEmitterValue('listState')\n  const deviation = useEmitterValue('deviation')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const groupContent = useEmitterValue('groupContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const ref = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? noop : scrollContainerStateCallback,\n    log,\n    customScrollParent\n  )\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const GroupComponent = useEmitterValue('GroupComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const hasGroups = useEmitterValue('groupIndices').length > 0\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n\n  const containerStyle: CSSProperties = showTopList\n    ? {}\n    : {\n        boxSizing: 'border-box',\n        paddingTop: listState.offsetTop + paddingTopAddition,\n        paddingBottom: listState.offsetBottom,\n        marginTop: deviation,\n      }\n\n  if (!showTopList && statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder)\n  }\n\n  return createElement(\n    ListComponent,\n    { ref, style: containerStyle, 'data-test-id': showTopList ? 'virtuoso-top-item-list' : 'virtuoso-item-list' },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex!\n      const key = computeItemKey(index + firstItemIndex, item.data)\n\n      if (isSeeking) {\n        return createElement(ScrollSeekPlaceholder, {\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || 'item',\n          ...(item.type === 'group' ? {} : { groupIndex: item.groupIndex }),\n        })\n      }\n\n      if (item.type === 'group') {\n        return createElement(\n          GroupComponent,\n          {\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            style: GROUP_STYLE,\n          } as any,\n          groupContent(item.index)\n        )\n      } else {\n        return createElement(\n          ItemComponent,\n          {\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            'data-item-group-index': item.groupIndex,\n            style: { overflowAnchor: 'none' },\n          } as any,\n          hasGroups\n            ? (itemContent as GroupItemContent<any>)(item.index, item.groupIndex!, item.data)\n            : (itemContent as ItemContent<any>)(item.index, item.data)\n        )\n      }\n    })\n  )\n})\n\nexport const scrollerStyle: CSSProperties = {\n  height: '100%',\n  outline: 'none',\n  overflowY: 'auto',\n  position: 'relative',\n  WebkitOverflowScrolling: 'touch',\n}\n\nexport const viewportStyle: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  top: 0,\n}\n\nconst topItemListStyle: CSSProperties = {\n  width: '100%',\n  position: positionStickyCssValue(),\n  top: 0,\n}\n\nconst Header: FC = React.memo(function VirtuosoHeader() {\n  const Header = useEmitterValue('HeaderComponent')\n  const headerHeight = usePublisher('headerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => headerHeight(correctItemSize(el, 'height')))\n  return Header ? createElement(headerFooterTag, { ref }, createElement(Header)) : null\n})\n\nconst Footer: FC = React.memo(function VirtuosoFooter() {\n  const Footer = useEmitterValue('FooterComponent')\n  const footerHeight = usePublisher('footerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => footerHeight(correctItemSize(el, 'height')))\n  return Footer ? createElement(headerFooterTag, { ref }, createElement(Footer)) : null\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nexport function buildScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('scrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const scrollerRefCallback = useEmitterValue('scrollerRef')\n\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    )\n\n    useEmitter('scrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef as React.MutableRefObject<HTMLDivElement | null>,\n        style: { ...scrollerStyle, ...style },\n        'data-test-id': 'virtuoso-scroller',\n        //@ts-expect-error what?\n        'data-virtuoso-scroller': 'true',\n        tabIndex: 0,\n        ...props,\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nexport function buildWindowScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('windowScrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const totalListHeight = useEmitterValue('totalListHeight')\n    const deviation = useEmitterValue('deviation')\n    const customScrollParent = useEmitterValue('customScrollParent')\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      noop,\n      customScrollParent\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window\n      return () => {\n        scrollerRef.current = null\n      }\n    }, [scrollerRef, customScrollParent])\n\n    useEmitter('windowScrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        style: { position: 'relative', ...style, ...(totalListHeight !== 0 ? { height: totalListHeight + deviation } : {}) },\n        //@ts-expect-error what?\n        'data-virtuoso-scroller': 'true',\n        ...props,\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nconst Viewport: FC = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TopItemListContainer: FC = ({ children }) => {\n  const TopItemList = useEmitterValue('TopItemListComponent')\n  const headerHeight = useEmitterValue('headerHeight')\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` }\n  return createElement(TopItemList || 'div', { style }, children)\n}\n\nconst ListRoot: FC<ListRootProps> = React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const showTopList = useEmitterValue('topItemsIndexes').length > 0\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <Header />\n        <Items />\n        <Footer />\n      </TheViewport>\n      {showTopList && (\n        <TopItemListContainer>\n          <Items showTopList={true} />\n        </TopItemListContainer>\n      )}\n    </TheScroller>\n  )\n})\n\nexport type ListHandle = RefHandle<typeof List>\n\nexport const { Component: List, usePublisher, useEmitterValue, useEmitter } = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      groupContent: 'groupContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      headerFooterTag: 'headerFooterTag',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n\n      // deprecated\n      item: 'item',\n      group: 'group',\n      topItems: 'topItems',\n      itemHeight: 'itemHeight',\n      scrollingStateChange: 'scrollingStateChange',\n      maxHeightCacheSize: 'maxHeightCacheSize',\n      footer: 'footer',\n      header: 'header',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      GroupContainer: 'GroupContainer',\n      emptyComponent: 'emptyComponent',\n      HeaderContainer: 'HeaderContainer',\n      FooterContainer: 'FooterContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      adjustForPrependedItems: 'adjustForPrependedItems',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  ListRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\n\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC } from 'react'\nimport { gridSystem } from './gridSystem'\nimport useSize from './hooks/useSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { GridComponents, GridComputeItemKey, GridItemContent, GridRootProps } from './interfaces'\nimport { addDeprecatedAlias, buildScroller, buildWindowScroller, identity, viewportStyle } from './List'\n\nconst gridComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<GridItemContent>((index) => `Item ${index}`)\n  const components = u.statefulStream<GridComponents>({})\n  const itemClassName = u.statefulStream('virtuoso-grid-item')\n  const listClassName = u.statefulStream('virtuoso-grid-list')\n  const computeItemKey = u.statefulStream<GridComputeItemKey>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof GridComponents>(propName: K, defaultValue: GridComponents[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    scrollerRef,\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder', 'div'),\n  }\n})\n\nconst combinedSystem = u.system(([gridSystem, gridComponentPropsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(gridComponentPropsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(gridComponentPropsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      gridComponentPropsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    u.publish(gridComponentPropsSystem.components, {\n      ...u.getValue(gridComponentPropsSystem.components),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ScrollSeekPlaceholder: placeholder,\n    })\n    u.publish(gridSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n\n  return { ...gridSystem, ...gridComponentPropsSystem, ...deprecatedProps }\n}, u.tup(gridSystem, gridComponentPropsSystem))\n\nconst GridItems: FC = React.memo(function GridItems() {\n  const gridState = useEmitterValue('gridState')\n  const listClassName = useEmitterValue('listClassName')\n  const itemClassName = useEmitterValue('itemClassName')\n  const itemContent = useEmitterValue('itemContent')\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const scrollHeightCallback = usePublisher('scrollHeight')\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder')!\n\n  const itemDimensions = usePublisher('itemDimensions')\n\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement!.parentElement!.scrollHeight\n    scrollHeightCallback(scrollHeight)\n    const firstItem = el.firstChild as HTMLElement\n    if (firstItem) {\n      itemDimensions(firstItem.getBoundingClientRect())\n    }\n  })\n\n  return createElement(\n    ListComponent,\n    { ref: listRef, className: listClassName, style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom } },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index)\n      return isSeeking\n        ? createElement(ScrollSeekPlaceholder, { key, index: item.index, height: gridState.itemHeight, width: gridState.itemWidth })\n        : createElement(ItemComponent, { className: itemClassName, 'data-index': item.index, key }, itemContent(item.index))\n    })\n  )\n})\n\nconst Viewport: FC = ({ children }) => {\n  const viewportDimensions = usePublisher('viewportDimensions')\n\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect())\n  })\n\n  return (\n    <div style={viewportStyle} ref={viewportRef}>\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle}>\n      {children}\n    </div>\n  )\n}\n\nconst GridRoot: FC<GridRootProps> = React.memo(function GridRoot({ ...props }) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <GridItems />\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nconst { Component: Grid, usePublisher, useEmitterValue, useEmitter } = systemToComponent(\n  combinedSystem,\n  {\n    optional: {\n      totalCount: 'totalCount',\n      overscan: 'overscan',\n      itemContent: 'itemContent',\n      components: 'components',\n      computeItemKey: 'computeItemKey',\n      initialItemCount: 'initialItemCount',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      listClassName: 'listClassName',\n      itemClassName: 'itemClassName',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n\n      // deprecated\n      item: 'item',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      scrollToIndex: 'scrollToIndex',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n    },\n  },\n  GridRoot\n)\n\nexport type foo<T> = T extends React.ForwardRefExoticComponent<React.RefAttributes<infer Handle>> ? Handle : never\n\nexport type GridHandle = RefHandle<typeof Grid>\nexport { Grid }\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport { map, pipe, statefulStream, system, tup, statefulStreamFromEmitter, distinctUntilChanged, noop, compose } from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC } from 'react'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport { ComputeItemKey, ItemContent, FixedHeaderContent, TableComponents, TableRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { identity, buildScroller, buildWindowScroller, viewportStyle } from './List'\nimport useSize from './hooks/useSize'\nimport { correctItemSize } from './utils/correctItemSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\n\nconst tableComponentPropsSystem = system(() => {\n  const itemContent = statefulStream<ItemContent<any>>((index: number) => <td>Item ${index}</td>)\n  const fixedHeaderContent = statefulStream<FixedHeaderContent>(null)\n  const components = statefulStream<TableComponents>({})\n  const computeItemKey = statefulStream<ComputeItemKey<any>>(identity)\n  const scrollerRef = statefulStream<(ref: HTMLElement | Window | null) => void>(noop)\n\n  const distinctProp = <K extends keyof TableComponents>(\n    propName: K,\n    defaultValue: TableComponents[K] | null | 'thead' | 'table' | 'tbody' | 'tr' | 'div' = null\n  ) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components) => components[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    itemContent,\n    fixedHeaderContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp('Table', 'table'),\n    TableHeadComponent: distinctProp('TableHead', 'thead'),\n    TableBodyComponent: distinctProp('TableBody', 'tbody'),\n    TableRowComponent: distinctProp('TableRow', 'tr'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nconst combinedSystem = system(([listSystem, propsSystem]) => {\n  return { ...listSystem, ...propsSystem }\n}, tup(listSystem, tableComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height }}></td>\n  </tr>\n)\n\nconst FillerRow = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height: height, padding: 0, border: 0 }}></td>\n  </tr>\n)\n\nexport const Items = React.memo(function VirtuosoItems() {\n  const listState = useEmitterValue('listState')\n  const deviation = useEmitterValue('deviation')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const ref = useChangedListContentsSizes(sizeRanges, itemSize, trackItemSizes, scrollContainerStateCallback, log, customScrollParent)\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const TableBodyComponent = useEmitterValue('TableBodyComponent')!\n  const TableRowComponent = useEmitterValue('TableRowComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder)\n  }\n\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation\n  const paddingBottom = listState.offsetBottom\n\n  const paddingTopEl = paddingTop > 0 ? <FillerRow height={paddingTop} key=\"padding-top\" /> : null\n\n  const paddingBottomEl = paddingBottom > 0 ? <FillerRow height={paddingBottom} key=\"padding-bottom\" /> : null\n\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex!\n    const key = computeItemKey(index + firstItemIndex, item.data)\n\n    if (isSeeking) {\n      return createElement(ScrollSeekPlaceholder, {\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || 'item',\n      })\n    }\n    return createElement(\n      TableRowComponent,\n      {\n        key,\n        'data-index': index,\n        'data-known-size': item.size,\n        'data-item-index': item.index,\n        style: { overflowAnchor: 'none' },\n      } as any,\n      itemContent(item.index, item.data)\n    )\n  })\n\n  return createElement(\n    TableBodyComponent,\n    { ref, 'data-test-id': 'virtuoso-item-list' },\n\n    [paddingTopEl, ...items, paddingBottomEl]\n  )\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nconst Viewport: FC = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TableRoot: FC<TableRootProps> = React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const fixedHeaderHeight = usePublisher('fixedHeaderHeight')\n  const fixedHeaderContent = useEmitterValue('fixedHeaderContent')\n  const theadRef = useSize(compose(fixedHeaderHeight, (el) => correctItemSize(el, 'height')))\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  const TheTable = useEmitterValue('TableComponent')\n  const TheTHead = useEmitterValue('TableHeadComponent')\n\n  const theHead = fixedHeaderContent\n    ? React.createElement(\n        TheTHead!,\n        { key: 'TableHead', style: { zIndex: 1, position: 'sticky', top: 0 }, ref: theadRef } as any,\n        fixedHeaderContent()\n      )\n    : null\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        {React.createElement(TheTable!, { style: { borderSpacing: 0 } } as any, [theHead, <Items key=\"TableBody\" />])}\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nexport type TableHandle = RefHandle<typeof Table>\n\nexport const { Component: Table, usePublisher, useEmitterValue, useEmitter } = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      fixedHeaderContent: 'fixedHeaderContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  TableRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { ForwardRefExoticComponent, ReactElement, Ref } from 'react'\nimport { Grid, GridHandle } from './Grid'\n\nimport {\n  Components,\n  ComputeItemKey,\n  FollowOutput,\n  GridComponents,\n  GridComputeItemKey,\n  GridItemContent,\n  GroupContent,\n  GroupItemContent,\n  IndexLocationWithAlign,\n  ItemContent,\n  ListItem,\n  ListRange,\n  ScrollSeekConfiguration,\n  TableComponents,\n  FixedHeaderContent,\n} from './interfaces'\nimport { List, ListHandle } from './List'\nimport { Table, TableHandle } from './Table'\nimport { ScrollIntoViewLocation } from './scrollIntoViewSystem'\ntype CompProps<T> = T extends ForwardRefExoticComponent<infer R> ? R : never\ntype ListProps = CompProps<typeof List>\ntype GridProps = CompProps<typeof Grid>\n\nexport interface VirtuosoProps<D> extends Omit<ListProps, 'groupCounts' | 'groupContent' | 'itemsRendered'> {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set the amount of items to remain fixed at the top of the list.\n   *\n   * For a header that scrolls away when scrolling, check the `components.Header` property.\n   */\n  topItemCount?: number\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: Components\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Set to customize the wrapper tag for the header and footer components (default is `div`).\n   */\n  headerFooterTag?: string\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the list won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n}\n\nexport interface GroupedVirtuosoProps<D>\n  extends Omit<VirtuosoProps<D>, 'totalCount' | 'itemContent'>,\n    Pick<ListProps, 'groupCounts' | 'groupContent'> {\n  /**\n   * Specifies the amount of items in each group (and, actually, how many groups are there).\n   * For example, passing [20, 30] will display 2 groups with 20 and 30 items each.\n   */\n  groupCounts?: number[]\n\n  /**\n   * Specifies how each each group header gets rendered. The callback receives the zero-based index of the group.\n   */\n  groupContent?: GroupContent\n\n  /**\n   * Specifies how each each item gets rendered.\n   */\n  itemContent?: GroupItemContent<D>\n}\n\nexport interface TableVirtuosoProps<D> extends Omit<VirtuosoProps<D>, 'components' | 'headerFooterTag' | 'topItemCount'> {\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the table.\n   */\n  components?: TableComponents\n  /**\n   * Set the contents of the table header.\n   */\n  fixedHeaderContent?: FixedHeaderContent\n\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the table won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n}\n\nexport interface VirtuosoGridProps extends GridProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: GridItemContent\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: GridComponents\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: GridComputeItemKey\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | null) => any\n\n  /**\n   * Sets the className for the list DOM element\n   */\n  listClassName?: string\n\n  /**\n   * Sets the grid items' className\n   */\n  itemClassName?: string\n\n  /**\n   * Uses the document scroller rather than wrapping the grid in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the grid won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n}\n\nexport interface VirtuosoHandle extends ListHandle {\n  /**\n   * Scrolls the component to the specified item index. See {{IndexLocationWithAlign}} for more options.\n   */\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  /**\n   * Scrolls the item into view if necessary. See [the website example](http://virtuoso.dev/keyboard-navigation/) for an implementation.\n   */\n  scrollIntoView(location: ScrollIntoViewLocation): void\n  /**\n   * Scrolls the component to the specified location. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollTo(location: ScrollToOptions): void\n  /**\n   * Scrolls the component with the specified amount. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface GroupedVirtuosoHandle extends ListHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface VirtuosoGridHandle extends GridHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport const Virtuoso = List as <D extends unknown = any>(props: VirtuosoProps<D> & { ref?: Ref<VirtuosoHandle> }) => ReactElement\nexport const GroupedVirtuoso = List as <D extends unknown = any>(\n  props: GroupedVirtuosoProps<D> & { ref?: Ref<GroupedVirtuosoHandle> }\n) => ReactElement\nexport const TableVirtuoso = Table as <D extends unknown = any>(props: TableVirtuosoProps<D> & { ref?: Ref<TableHandle> }) => ReactElement\nexport const VirtuosoGrid = Grid as (props: VirtuosoGridProps & { ref?: Ref<VirtuosoGridHandle> }) => ReactElement\n"]},"metadata":{},"sourceType":"module"}